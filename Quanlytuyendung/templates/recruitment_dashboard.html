{% extends 'base.html' %}
{% block title %}{{ title }}{% endblock %}

{% block content %}
<style>
.dashboard {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 30px;
    padding: 40px;
}

.card {
    background: white;
    border-radius: 12px;
    box-shadow: 0 3px 8px rgba(0,0,0,0.08);
    padding: 20px;
}

.stats {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
    margin-bottom: 25px;
}

.stat-box {
    background: #f0f7ff;
    padding: 20px;
    border-radius: 10px;
    text-align: center;
    font-weight: 600;
    color: #0d3b66;
}

.stat-number {
    font-size: 24px;
    font-weight: 800;
    color: #2563eb;
}

.post-item {
    background-color: #ffffff;
    transition: all 0.2s ease;
    border-bottom: 1px solid #eee;
    padding: 10px 0;
}

.post-item:hover {
    transform: translateX(5px);
    background-color: #f8f9fa;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

.bg-light-hover:hover {
    background-color: #f0f7ff;
}

.post-item a {
    text-decoration: none;
    color: #0d3b66;
    font-weight: 600;
}

.feature-box {
    background: #f4f8ff;
    padding: 15px 20px;
    border-radius: 10px;
    margin-bottom: 15px;
    transition: 0.2s;
}

.feature-box:hover {
    background: #e0ebff;
    transform: translateY(-2px);
}

.feature-box a {
    color: #0d3b66;
    text-decoration: none;
    font-weight: 600;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.feature-box i {
    color: #2563eb;
}
</style>

<div class="dashboard">
    <!-- TR√ÅI: B√ÄI ƒêƒÇNG TUY·ªÇN D·ª§NG -->
    <div class="card shadow-sm border-0">
        <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center rounded">
            <h5 class="mb-0">üì¢ B√†i ƒëƒÉng tuy·ªÉn d·ª•ng m·ªõi nh·∫•t</h5>
            <a href="{% url 'all_job_postings_hr' %}" class="btn btn-light btn-sm fw-bold">
                Xem t·∫•t c·∫£ ‚Üí
            </a>
        </div>

        <div class="card-body" style="max-height: 400px; overflow-y: auto;">
            {% for post in latest_posts %}
                <div class="post-item mb-3 p-3 border-start border-3 border-primary rounded bg-light-hover">
                    <a href="{% url 'recruitment_post_detail' post.id %}">
                        {{ post.title }}
                    </a>
                    <div class="text-muted small mt-1">
                        üìÖ {{ post.created_at|date:"d/m/Y" }}
                    </div>
                </div>
            {% empty %}
                <p class="text-muted text-center my-3">Ch∆∞a c√≥ b√†i ƒëƒÉng tuy·ªÉn d·ª•ng n√†o.</p>
            {% endfor %}
        </div>
    </div>

    <!-- PH·∫¢I: TH·ªêNG K√ä + CH·ª®C NƒÇNG -->
    <div>
        <div class="card mb-4">
            <h4>üìä Th·ªëng k√™ nhanh</h4>
            <div class="stats">
                <div class="stat-box">
                    <div class="stat-number">{{ total_posts }}</div>
                    B√†i ƒëƒÉng
                </div>
                <div class="stat-box">
                    <div class="stat-number">{{ total_candidates }}</div>
                    ·ª®ng vi√™n
                </div>
                <div class="stat-box">
                    <div class="stat-number">{{ total_skills }}</div>
                    K·ªπ nƒÉng
                </div>
                <div class="stat-box">
                    <div class="stat-number">{{ total_requests }}</div>
                    Y√™u c·∫ßu
                </div>
            </div>
        </div>

        <div class="card">
            <h4>‚öôÔ∏è Qu·∫£n l√Ω nhanh</h4>
            <div class="feature-box">
                <a href="{% url 'manage_status' %}">
                    Qu·∫£n l√Ω ·ª®ng vi√™n
                    <i class="bi bi-people-fill"></i>
                </a>
            </div>
            <div class="feature-box">
                <a href="{% url 'add_skill' %}">
                    Qu·∫£n l√Ω K·ªπ nƒÉng
                    <i class="bi bi-lightbulb-fill"></i>
                </a>
            </div>
            <div class="feature-box">
                <a href="{% url 'manage_requests_hr' %}">
                    Qu·∫£n l√Ω Y√™u c·∫ßu tuy·ªÉn d·ª•ng
                    <i class="bi bi-file-earmark-text-fill"></i>
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
