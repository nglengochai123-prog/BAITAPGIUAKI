{% extends "base.html" %}

{% block title %}Chi ti·∫øt b·∫£ng l∆∞∆°ng{% endblock %}

{% block content %}
<div class="container mt-4">

    <a href="{% url 'payroll_management_view' %}" class="btn btn-secondary mb-3">
        ‚Üê Quay l·∫°i
    </a>

    <div class="card">
        <div class="card-header bg-primary text-white">
            <h3>B·∫£ng l∆∞∆°ng chi ti·∫øt ‚Äì {{ employee.full_name }}</h3>
            <p>K·ª≥ l∆∞∆°ng: {{ period.name }}</p>
        </div>

        <div class="card-body">

            <h4 class="mb-3">1. Th√¥ng tin chung</h4>
            <ul>
                <li><strong>Nh√¢n vi√™n:</strong> {{ employee.full_name }}</li>
                <li><strong>Email:</strong> {{ employee.email }}</li>
                <li><strong>K·ª≥ l∆∞∆°ng:</strong> {{ period.name }}</li>
                <li><strong>Ng√†y:</strong> {{ period.start_date }} ‚Üí {{ period.end_date }}</li>
            </ul>

            <hr>

            <h4 class="mb-3">2. Chi ti·∫øt t√≠nh l∆∞∆°ng</h4>
            <table class="table table-bordered">
                <tr>
                    <th>L∆∞∆°ng c∆° b·∫£n (Rate)</th>
                    <td>{{ entry.basic_salary|floatformat:2 }} VND</td>
                </tr>
                <tr>
                    <th>Ng√†y c√¥ng th·ª±c t·∫ø</th>
                    <td>{{ entry.actual_worked_days }} / {{ entry.standard_worked_days }}</td>
                </tr>
                <tr>
                    <th>T·ªïng ph·ª• c·∫•p</th>
                    <td>{{ entry.total_allowance|floatformat:2 }} VND</td>
                </tr>
                <tr>
                    <th>T·ªïng th∆∞·ªüng</th>
                    <td>{{ entry.total_reward|floatformat:2 }} VND</td>
                </tr>
                <tr class="table-success">
                    <th>Th·ª±c lƒ©nh</th>
                    <td><strong>{{ entry.received|floatformat:2 }} VND</strong></td>
                </tr>
            </table>

            <h5 class="mt-4">üßÆ C√¥ng th·ª©c t√≠nh</h5>
            <p>
                <code>
                    L∆∞∆°ng th·ª±c lƒ©nh =
                    (L∆∞∆°ng c∆° b·∫£n / Ng√†y chu·∫©n √ó Ng√†y th·ª±c t·∫ø)
                    + Ph·ª• c·∫•p
                    + Th∆∞·ªüng
                </code>
            </p>

            <hr>

            <h4 class="mb-3">3. Chi ti·∫øt ch·∫•m c√¥ng</h4>

            {% if timekeeping_records %}
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Ng√†y</th>
                            <th>Check-in</th>
                            <th>Check-out</th>
                            <th>Tr·∫°ng th√°i</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for tk in timekeeping_records %}
                        <tr>
                            <td>{{ tk.date_of_attendance }}</td>
                            <td>{{ tk.check_in }}</td>
                            <td>{{ tk.check_out }}</td>
                            <td>{{ tk.status }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            {% else %}
                <p>Kh√¥ng c√≥ d·ªØ li·ªáu ch·∫•m c√¥ng trong k·ª≥.</p>
            {% endif %}

        </div>
    </div>
</div>
{% endblock %}
