Index: Tinhluong/models.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>from django.db import models\r\nfrom django.contrib import auth\r\nfrom datetime import date\r\n\r\n\r\nclass Employee(models.Model):\r\n    # Khóa chính id (AutoField) sẽ được Django tự động tạo nếu không khai báo\r\n    employee_code = models.CharField(\r\n        max_length=10,\r\n        unique=True,\r\n        help_text=\"Mã định danh duy nhất của nhân viên.\"\r\n    )\r\n    first_names = models.CharField(\r\n        max_length=50,\r\n        help_text=\"Tên của nhân viên.\"\r\n    )\r\n    last_names = models.CharField(\r\n        max_length=50,\r\n        help_text=\"Họ của nhân viên.\"\r\n    )\r\n    salary_level = models.IntegerField(\r\n        null=True,\r\n        blank=True,  # Cho phép trống trong form (Chương 4)\r\n        help_text=\"Bậc lương để xác định mức lương cơ bản.\"\r\n    )\r\n\r\n    def __str__(self):\r\n        # Trả về chuỗi đại diện đối tượng (tương tự Contributor [10])\r\n        return f\"{self.last_names} {self.first_names} ({self.employee_code})\"\r\n\r\nclass SalaryComponent(models.Model):\r\n    name = models.CharField(\r\n        max_length=50,\r\n        help_text=\"Tên thành phần lương (ví dụ: Lương Cơ Bản, Phụ Cấp Ăn Trưa).\"\r\n    )\r\n    amount = models.DecimalField(\r\n        max_digits=10,\r\n        decimal_places=2,\r\n        help_text=\"Số tiền cố định của thành phần này.\"\r\n    )\r\n    is_deduction = models.BooleanField(\r\n        default=False,\r\n        help_text=\"Đánh dấu nếu đây là khoản khấu trừ (ví dụ: Bảo hiểm xã hội).\"\r\n    )\r\n\r\n    def __str__(self):\r\n        return self.name\r\n\r\n\r\nclass Timesheet(models.Model):\r\n    class StatusChoices(models.TextChoices):  # Tương tự ContributionRole [11, 12]\r\n        PENDING = \"PENDING\", \"Chờ Duyệt\"\r\n        APPROVED = \"APPROVED\", \"Đã Duyệt\"\r\n        REJECTED = \"REJECTED\", \"Từ Chối\"\r\n\r\n    employee = models.ForeignKey(\r\n        Employee,\r\n        on_delete=models.PROTECT,  # Không cho xóa nhân viên nếu còn dữ liệu chấm công [13-15]\r\n        help_text=\"Nhân viên có bảng chấm công này.\"\r\n    )\r\n    month_year = models.DateField(\r\n        verbose_name=\"Tháng tính lương\",  # Tên mô tả thân thiện [16]\r\n        help_text=\"Ngày đầu tiên của tháng tính lương.\"\r\n    )\r\n    working_days = models.FloatField(\r\n        help_text=\"Số ngày công thực tế.\"\r\n    )\r\n    overtime_hours = models.IntegerField(\r\n        default=0,\r\n        help_text=\"Số giờ tăng ca (nếu có).\"\r\n    )\r\n    status = models.CharField(\r\n        max_length=10,\r\n        choices=StatusChoices.choices,  # Sử dụng danh sách lựa chọn\r\n        default=StatusChoices.PENDING,\r\n        help_text=\"Trạng thái của bảng chấm công.\"\r\n    )\r\n\r\n    class Meta:\r\n        # Đảm bảo mỗi nhân viên chỉ có một bảng chấm công cho mỗi tháng\r\n        unique_together = ('employee', 'month_year')\r\n\r\n    def __str__(self):\r\n        return f\"Timesheet for {self.employee.last_names} - {self.month_year.strftime('%Y-%m')}\"\r\n\r\nclass CustomAdjustment(models.Model):\r\n\r\n    class AdjustmentTypes(models.TextChoices):\r\n        BONUS = \"BONUS\", \"Thưởng\"\r\n        DEDUCTION = \"DEDUCTION\", \"Khấu Trừ/Phạt\"\r\n        ALLOWANCE = \"ALLOWANCE\", \"Phụ Cấp Khác\"\r\n\r\n    employee = models.ForeignKey(\r\n        Employee,\r\n        on_delete=models.CASCADE, # Xóa nhân viên thì xóa luôn các điều chỉnh liên quan [14, 17-19]\r\n        help_text=\"Nhân viên áp dụng khoản điều chỉnh.\"\r\n    )\r\n    adjustment_type = models.CharField(\r\n        max_length=20,\r\n        choices=AdjustmentTypes.choices,\r\n        help_text=\"Loại điều chỉnh (Thưởng, Phạt, Phụ cấp).\"\r\n    )\r\n    amount = models.DecimalField(\r\n        max_digits=10,\r\n        decimal_places=2,\r\n        help_text=\"Số tiền điều chỉnh.\"\r\n    )\r\n    notes = models.TextField(\r\n        blank=True, # Cho phép trống trong form nhập liệu [20]\r\n        help_text=\"Ghi chú chi tiết về khoản điều chỉnh.\"\r\n    )\r\n    # Khóa ngoại liên kết đến PayrollRecord (Bảng lương)\r\n    payroll_record = models.ForeignKey(\r\n        'PayrollRecord',\r\n        on_delete=models.SET_NULL,\r\n        null=True,\r\n        blank=True,\r\n        help_text=\"Bảng lương mà điều chỉnh này được áp dụng.\"\r\n    )\r\n\r\n    def __str__(self):\r\n        return f\"{self.adjustment_type} for {self.employee.last_names}: {self.amount}\"\r\n\r\nclass PayrollRecord(models.Model):\r\n    employee = models.ForeignKey(\r\n        Employee,\r\n        on_delete=models.PROTECT,\r\n        help_text=\"Nhân viên nhận bảng lương.\"\r\n    )\r\n    period_start_date = models.DateField(\r\n        help_text=\"Ngày bắt đầu kỳ tính lương.\"\r\n    )\r\n    period_end_date = models.DateField(\r\n        help_text=\"Ngày kết thúc kỳ tính lương.\"\r\n    )\r\n    gross_salary = models.DecimalField(\r\n        max_digits=12,\r\n        decimal_places=2,\r\n        help_text=\"Tổng lương trước thuế.\"\r\n    )\r\n    deductions = models.DecimalField(\r\n        max_digits=12,\r\n        decimal_places=2,\r\n        help_text=\"Tổng các khoản khấu trừ (thuế, bảo hiểm...).\"\r\n    )\r\n    net_salary = models.DecimalField(\r\n        max_digits=12,\r\n        decimal_places=2,\r\n        help_text=\"Lương thực nhận (Net Salary).\"\r\n    )\r\n    processed_by = models.ForeignKey(\r\n        auth.get_user_model(), # Liên kết đến User model của Django [6, 18]\r\n        on_delete=models.SET_NULL,\r\n        null=True,\r\n        blank=True,\r\n        help_text=\"Người dùng (admin) đã xử lý bảng lương.\"\r\n    )\r\n    is_paid = models.BooleanField(\r\n        default=False,\r\n        help_text=\"Trạng thái đã thanh toán.\"\r\n    )\r\n\r\n    def __str__(self):\r\n        return f\"Payroll for {self.employee.last_names} ({self.period_end_date})\"\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Tinhluong/models.py b/Tinhluong/models.py
--- a/Tinhluong/models.py	(revision 0c3b7066d7ac776386bbd4c4783c7a5f62c2b720)
+++ b/Tinhluong/models.py	(date 1762185339764)
@@ -1,164 +1,139 @@
+
 from django.db import models
-from django.contrib import auth
-from datetime import date
+from django.contrib.auth import get_user_model
+from django.db.models import Count, Q
+from Quanlyhoso.models import NhanVien
 
 
-class Employee(models.Model):
-    # Khóa chính id (AutoField) sẽ được Django tự động tạo nếu không khai báo
-    employee_code = models.CharField(
-        max_length=10,
-        unique=True,
-        help_text="Mã định danh duy nhất của nhân viên."
-    )
-    first_names = models.CharField(
-        max_length=50,
-        help_text="Tên của nhân viên."
-    )
-    last_names = models.CharField(
-        max_length=50,
-        help_text="Họ của nhân viên."
-    )
-    salary_level = models.IntegerField(
-        null=True,
-        blank=True,  # Cho phép trống trong form (Chương 4)
-        help_text="Bậc lương để xác định mức lương cơ bản."
-    )
 
-    def __str__(self):
-        # Trả về chuỗi đại diện đối tượng (tương tự Contributor [10])
-        return f"{self.last_names} {self.first_names} ({self.employee_code})"
-
+# Model 1: SalaryComponent (Thành phần Lương - BASE, PHỤ CẤP, THƯỞNG)
 class SalaryComponent(models.Model):
-    name = models.CharField(
-        max_length=50,
-        help_text="Tên thành phần lương (ví dụ: Lương Cơ Bản, Phụ Cấp Ăn Trưa)."
-    )
-    amount = models.DecimalField(
-        max_digits=10,
-        decimal_places=2,
-        help_text="Số tiền cố định của thành phần này."
-    )
-    is_deduction = models.BooleanField(
-        default=False,
-        help_text="Đánh dấu nếu đây là khoản khấu trừ (ví dụ: Bảo hiểm xã hội)."
-    )
+    COMPONENT_TYPES = [
+        ('BASE', 'Lương Cơ Bản'),
+        ('ALLOWANCE', 'Phụ Cấp'),
+        ('BONUS', 'Thưởng'),
+    ]
+    name = models.CharField(max_length=100, unique=True, verbose_name="Tên thành phần")
+    component_type = models.CharField(max_length=10, choices=COMPONENT_TYPES,
+                                      default='BASE',verbose_name="Loại thành phần")  # [5, 6]
+
+    def __str__(self):
+        return f"{self.name} ({self.get_component_type_display()})"
+
+    class Meta:
+        verbose_name = "Thành phần Lương"
+
+
+# Model 2: EmployeeSalary (Cấu trúc Lương Cố định của NV)
+class EmployeeSalary(models.Model):
+    employee = models.ForeignKey(NhanVien, on_delete=models.PROTECT, related_name='salary_details',
+                                 verbose_name="Nhân viên")  # [7-9]
+    component = models.ForeignKey(SalaryComponent, on_delete=models.PROTECT,
+                                  limit_choices_to={'component_type__in': ['BASE', 'ALLOWANCE']},
+                                  verbose_name="Thành phần lương")
+
+    amount = models.DecimalField(max_digits=15, decimal_places=2, verbose_name="Số tiền")  # [1, 10]
+    is_active = models.BooleanField(default=True, verbose_name="Đang áp dụng")
+
+    def __str__(self):
+        return f"{self.employee.name} - {self.component.name}: {self.amount}"
+
+    class Meta:
+        verbose_name = "Lương Cố định Nhân viên"
+        # Ràng buộc: Mỗi nhân viên chỉ có một mức lương cơ bản đang hoạt động
+        unique_together = ('employee', 'component')
+
+
+    # Model 3: PayrollPeriod (Kỳ Lương)
+
+class PayrollPeriod(models.Model):
+    name = models.CharField(max_length=100, verbose_name="Tên kỳ lương")
+    start_date = models.DateField(verbose_name="Ngày bắt đầu")  # [10, 11]
+    end_date = models.DateField(verbose_name="Ngày kết thúc")
+
+    # Số ngày công chuẩn trong tháng (tham số quan trọng trong công thức)
+    standard_working_days = models.DecimalField(max_digits=5, decimal_places=2,
+                                                verbose_name="Số ngày công chuẩn")  # [1, 10]
+    is_closed = models.BooleanField(default=False, verbose_name="Đã chốt kỳ")
+
 
     def __str__(self):
         return self.name
 
+    class Meta:
+        verbose_name = "Kỳ Lương"
+        ordering = ['-start_date']  # [12]
 
-class Timesheet(models.Model):
-    class StatusChoices(models.TextChoices):  # Tương tự ContributionRole [11, 12]
-        PENDING = "PENDING", "Chờ Duyệt"
-        APPROVED = "APPROVED", "Đã Duyệt"
-        REJECTED = "REJECTED", "Từ Chối"
 
-    employee = models.ForeignKey(
-        Employee,
-        on_delete=models.PROTECT,  # Không cho xóa nhân viên nếu còn dữ liệu chấm công [13-15]
-        help_text="Nhân viên có bảng chấm công này."
-    )
-    month_year = models.DateField(
-        verbose_name="Tháng tính lương",  # Tên mô tả thân thiện [16]
-        help_text="Ngày đầu tiên của tháng tính lương."
+# Model 4: ChamCong (Chấm Công) - Sử dụng Model đã cung cấp
+class ChamCong(models.Model):
+    TRANG_THAI_CHAM_CONG_CHOICES = (
+        ('Đúng giờ', 'Đúng giờ'),
+        ('Đi trễ', 'Đi trễ'),
+        ('Về sớm', 'Về sớm'),
+        ('Vắng mặt', 'Vắng mặt'),
+        ('Nghỉ phép', 'Nghỉ phép'),
     )
-    working_days = models.FloatField(
-        help_text="Số ngày công thực tế."
-    )
-    overtime_hours = models.IntegerField(
-        default=0,
-        help_text="Số giờ tăng ca (nếu có)."
-    )
-    status = models.CharField(
-        max_length=10,
-        choices=StatusChoices.choices,  # Sử dụng danh sách lựa chọn
-        default=StatusChoices.PENDING,
-        help_text="Trạng thái của bảng chấm công."
-    )
+
+    nhan_vien = models.ForeignKey(NhanVien, on_delete=models.CASCADE, related_name='cham_cong',
+                                  verbose_name="Nhân viên")
+    ngay_cham_cong = models.DateField(verbose_name="Ngày chấm công")  # [10]
+
+    gio_vao = models.TimeField(null=True, blank=True, verbose_name="Giờ vào")  # [10]
+    gio_ra = models.TimeField(null=True, blank=True, verbose_name="Giờ ra")
+
+    trang_thai = models.CharField(max_length=50, choices=TRANG_THAI_CHAM_CONG_CHOICES, default='Đúng giờ',
+                                  verbose_name="Trạng thái")  # [1]
 
     class Meta:
-        # Đảm bảo mỗi nhân viên chỉ có một bảng chấm công cho mỗi tháng
-        unique_together = ('employee', 'month_year')
+        verbose_name = "Chấm Công"
+        verbose_name_plural = "Dữ Liệu Chấm Công"
+        unique_together = ('nhan_vien', 'ngay_cham_cong')
+        ordering = ['-ngay_cham_cong', 'nhan_vien']
 
     def __str__(self):
-        return f"Timesheet for {self.employee.last_names} - {self.month_year.strftime('%Y-%m')}"
+        return f"{self.nhan_vien.name} - {self.ngay_cham_cong}"
 
-class CustomAdjustment(models.Model):
 
-    class AdjustmentTypes(models.TextChoices):
-        BONUS = "BONUS", "Thưởng"
-        DEDUCTION = "DEDUCTION", "Khấu Trừ/Phạt"
-        ALLOWANCE = "ALLOWANCE", "Phụ Cấp Khác"
+# Model 5: VariableBonus (Thưởng Biến đổi)
+class VariableBonus(models.Model):
+    employee = models.ForeignKey(NhanVien, on_delete=models.PROTECT, verbose_name="Nhân viên")
+    period = models.ForeignKey(PayrollPeriod, on_delete=models.PROTECT, verbose_name="Kỳ lương")
 
-    employee = models.ForeignKey(
-        Employee,
-        on_delete=models.CASCADE, # Xóa nhân viên thì xóa luôn các điều chỉnh liên quan [14, 17-19]
-        help_text="Nhân viên áp dụng khoản điều chỉnh."
-    )
-    adjustment_type = models.CharField(
-        max_length=20,
-        choices=AdjustmentTypes.choices,
-        help_text="Loại điều chỉnh (Thưởng, Phạt, Phụ cấp)."
-    )
-    amount = models.DecimalField(
-        max_digits=10,
-        decimal_places=2,
-        help_text="Số tiền điều chỉnh."
-    )
-    notes = models.TextField(
-        blank=True, # Cho phép trống trong form nhập liệu [20]
-        help_text="Ghi chú chi tiết về khoản điều chỉnh."
-    )
-    # Khóa ngoại liên kết đến PayrollRecord (Bảng lương)
-    payroll_record = models.ForeignKey(
-        'PayrollRecord',
-        on_delete=models.SET_NULL,
-        null=True,
-        blank=True,
-        help_text="Bảng lương mà điều chỉnh này được áp dụng."
-    )
+    # Model này chỉ dành cho Thưởng, có thể tham chiếu đến SalaryComponent loại BONUS
+    component = models.ForeignKey(SalaryComponent, on_delete=models.PROTECT,
+                                  limit_choices_to={'component_type': 'BONUS'}, verbose_name="Loại thưởng")
+
+    amount = models.DecimalField(max_digits=15, decimal_places=2, verbose_name="Số tiền thưởng")
 
     def __str__(self):
-        return f"{self.adjustment_type} for {self.employee.last_names}: {self.amount}"
+        return f"{self.employee.name} - {self.component.name} ({self.period.name})"
+
+    class Meta:
+        verbose_name = "Thưởng Biến đổi"
+
+
+# Model 6: PayrollEntry (Lưu trữ Bảng Lương/ Thực lĩnh)
+class PayrollEntry(models.Model):
+    employee = models.ForeignKey(NhanVien, on_delete=models.PROTECT, verbose_name="Nhân viên")
+    period = models.ForeignKey(PayrollPeriod, on_delete=models.PROTECT, verbose_name="Kỳ lương")
+
+    # Dữ liệu đầu vào để dễ dàng kiểm tra công thức sau này
+    luong_co_ban = models.DecimalField(max_digits=15, decimal_places=2, verbose_name="Lương cơ bản (Rate)")
+    so_ngay_cong_thuc_te = models.DecimalField(max_digits=5, decimal_places=2, verbose_name="Ngày công thực tế")
+    so_ngay_cong_chuan = models.DecimalField(max_digits=5, decimal_places=2, verbose_name="Ngày công chuẩn")
 
-class PayrollRecord(models.Model):
-    employee = models.ForeignKey(
-        Employee,
-        on_delete=models.PROTECT,
-        help_text="Nhân viên nhận bảng lương."
-    )
-    period_start_date = models.DateField(
-        help_text="Ngày bắt đầu kỳ tính lương."
-    )
-    period_end_date = models.DateField(
-        help_text="Ngày kết thúc kỳ tính lương."
-    )
-    gross_salary = models.DecimalField(
-        max_digits=12,
-        decimal_places=2,
-        help_text="Tổng lương trước thuế."
-    )
-    deductions = models.DecimalField(
-        max_digits=12,
-        decimal_places=2,
-        help_text="Tổng các khoản khấu trừ (thuế, bảo hiểm...)."
-    )
-    net_salary = models.DecimalField(
-        max_digits=12,
-        decimal_places=2,
-        help_text="Lương thực nhận (Net Salary)."
-    )
-    processed_by = models.ForeignKey(
-        auth.get_user_model(), # Liên kết đến User model của Django [6, 18]
-        on_delete=models.SET_NULL,
-        null=True,
-        blank=True,
-        help_text="Người dùng (admin) đã xử lý bảng lương."
-    )
-    is_paid = models.BooleanField(
-        default=False,
-        help_text="Trạng thái đã thanh toán."
-    )
+    tong_phu_cap = models.DecimalField(max_digits=15, decimal_places=2, verbose_name="Tổng Phụ cấp")
+    tong_thuong = models.DecimalField(max_digits=15, decimal_places=2, verbose_name="Tổng Thưởng")
+
+    # Kết quả tính toán
+    thuc_linh = models.DecimalField(max_digits=15, decimal_places=2, verbose_name="Thực lĩnh")
+
+    calculated_date = models.DateTimeField(auto_now_add=True, verbose_name="Ngày tính")  # [10, 13, 14]
 
     def __str__(self):
-        return f"Payroll for {self.employee.last_names} ({self.period_end_date})"
+        return f"Bảng Lương {self.employee.name} - {self.period.name}"
+
+    class Meta:
+        verbose_name = "Bảng Lương Đã Tính"
+        unique_together = ('employee', 'period')
Index: Tinhluong/views.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>from django.shortcuts import render\r\n\r\n\r\ndef index(request):\r\n    return render(request, \"base1.html\")\r\n\r\n\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Tinhluong/views.py b/Tinhluong/views.py
--- a/Tinhluong/views.py	(revision 0c3b7066d7ac776386bbd4c4783c7a5f62c2b720)
+++ b/Tinhluong/views.py	(date 1762185339767)
@@ -1,8 +1,189 @@
-from django.shortcuts import render
+
+from django import forms
+from django.shortcuts import render, get_object_or_404, redirect
+from django.db.models import Q, Count, Sum  # Sử dụng cho các truy vấn phức tạp và tính tổng [15-17]
+from django.contrib import messages  # Cần để đăng ký thông điệp (messages) [18, 19]
+from decimal import Decimal  # Đảm bảo tính toán chính xác
+import datetime
+
+# Import Model NhanVien từ ứng dụng Quanlyhoso theo yêu cầu
+from Quanlyhoso.models import NhanVien
+
+# Import các Model cục bộ
+from .models import (
+    PayrollPeriod, EmployeeSalary, ChamCong,
+    VariableBonus, PayrollEntry, SalaryComponent
+)
+
+
+# --- ĐỊNH NGHĨA FORM CHỌN KỲ LƯƠNG TRONG VIEWS.PY ---
+
+class PeriodSelectionForm(forms.Form):
+    """Form để người dùng chọn Kỳ lương cần tính toán."""
+
+    period = forms.ModelChoiceField(
+        # Lọc các kỳ lương chưa chốt (is_closed=False)
+        queryset=PayrollPeriod.objects.filter(is_closed=False).order_by('-start_date'),
+        label="Chọn Kỳ Lương",
+        help_text="Chỉ hiển thị các kỳ lương chưa chốt.",
+        empty_label="--- Chọn kỳ lương ---"
+    )
+
+
+# --- HÀM TIỆN ÍCH: LẤY SỐ NGÀY CÔNG THỰC TẾ ---
+
+def get_actual_working_days(employee_pk, start_date, end_date):
+    """Tính tổng số ngày công thực tế trong một kỳ."""
+
+    # Lọc theo nhân viên và khoảng thời gian (sử dụng lookups __gte và __lte) [13]
+    working_days_queryset = ChamCong.objects.filter(
+        nhan_vien__pk=employee_pk,
+        ngay_cham_cong__gte=start_date,
+        ngay_cham_cong__lte=end_date
+    )
+
+    # Loại trừ các trạng thái không tính là ngày công thực tế (Vắng mặt, Nghỉ phép) [20]
+    excluded_statuses = ['Vắng mặt', 'Nghỉ phép']
+
+    total_days = working_days_queryset.exclude(
+        trang_thai__in=excluded_statuses
+    ).count()
+
+    return Decimal(total_days)
+
+
+# --- HÀM TIỆN ÍCH: LOGIC TÍNH LƯƠNG CỐT LÕI ---
+
+def calculate_employee_payroll(employee_pk, period):
+    """Thực hiện tính toán lương cho một nhân viên dựa trên công thức đã cho."""
+    employee = get_object_or_404(NhanVien, pk=employee_pk)
+
+    # 1. Lấy Lương Cơ Bản (BASE)
+    try:
+        base_salary_entry = EmployeeSalary.objects.get(
+            employee=employee,
+            component__component_type='BASE',
+            is_active=True
+        )
+        luong_co_ban_rate = base_salary_entry.amount
+    except EmployeeSalary.DoesNotExist:
+        raise ValueError(f"Không tìm thấy Lương Cơ Bản đang hoạt động.")
+
+    # 2. Tính Lương Cơ Bản đã điều chỉnh theo ngày công
+    so_ngay_cong_chuan = period.standard_working_days
+    so_ngay_cong_thuc_te = get_actual_working_days(
+        employee_pk, period.start_date, period.end_date
+    )
+
+    if so_ngay_cong_chuan == 0:
+        raise ValueError("Số ngày công chuẩn trong kỳ lương là 0.")
+
+    # Công thức Lương cơ bản điều chỉnh
+    base_pay_calculated = (luong_co_ban_rate / so_ngay_cong_chuan) * so_ngay_cong_thuc_te
+
+    # 3. Tính Tổng Phụ Cấp (cố định)
+    # Sử dụng aggregation SUM [21]
+    fixed_allowances_qs = EmployeeSalary.objects.filter(
+        employee=employee,
+        component__component_type='ALLOWANCE',
+        is_active=True
+    ).aggregate(total=Sum('amount'))
+    tong_phu_cap = fixed_allowances_qs['total'] if fixed_allowances_qs['total'] else Decimal(0)
+
+    # 4. Tính Tổng Thưởng (biến đổi)
+    total_bonus_qs = VariableBonus.objects.filter(
+        employee=employee,
+        period=period
+    ).aggregate(total=Sum('amount'))
+    tong_thuong = total_bonus_qs['total'] if total_bonus_qs['total'] else Decimal(0)
+
+    # 5. Tính Thực lĩnh
+    thuc_linh = base_pay_calculated + tong_phu_cap + tong_thuong
+
+    # 6. Lưu kết quả vào PayrollEntry (sử dụng update_or_create) [22]
+    payroll_entry, created = PayrollEntry.objects.update_or_create(
+        employee=employee,
+        period=period,
+        defaults={
+            'luong_co_ban': luong_co_ban_rate,
+            'so_ngay_cong_thuc_te': so_ngay_cong_thuc_te,
+            'so_ngay_cong_chuan': so_ngay_cong_chuan,
+            'tong_phu_cap': tong_phu_cap,
+            'tong_thuong': tong_thuong,
+            'thuc_linh': thuc_linh,
+        }
+    )
+    return payroll_entry
+
+
+# --- VIEW QUẢN LÝ TÍNH LƯƠNG TỔNG HỢP ---
+
+def payroll_management_view(request):
+    """
+    View tổng hợp xử lý việc chọn kỳ lương, kích hoạt tính toán và hiển thị kết quả.
+    """
 
+    # Khởi tạo form với dữ liệu GET hoặc None [23]
+    period_form = PeriodSelectionForm(request.GET or None)
+    period = None
+    payroll_entries = []
 
-def index(request):
-    return render(request, "base1.html")
+    # 1. Xử lý POST request (Tính toán lương)
+    if request.method == 'POST':
+        form = PeriodSelectionForm(request.POST)  # Khởi tạo form với dữ liệu POST [23, 24]
 
+        if form.is_valid():  # Kiểm tra tính hợp lệ của dữ liệu form [25, 26]
+            period = form.cleaned_data['period']
+            success_count = 0
+            error_count = 0
 
+            employees = NhanVien.objects.all()
 
+            for employee in employees:
+                try:
+                    calculate_employee_payroll(employee.pk, period)
+                    success_count += 1
+                except Exception as e:
+                    error_count += 1
+                    messages.error(request,
+                                   f"Lỗi tính lương cho {employee.name}: {str(e)}")  # Đăng ký thông điệp lỗi [22, 27]
+
+            messages.success(request,
+                             f"Đã hoàn thành tính lương cho kỳ {period.name}: Thành công {success_count}, Lỗi {error_count}.")
+
+            # Chuyển hướng sau POST (Pattern Post/Redirect/Get) [27, 28]
+            return redirect('payroll_management_view')
+
+        else:
+            # Nếu form không hợp lệ
+            messages.error(request, "Dữ liệu form không hợp lệ. Vui lòng kiểm tra lại.")
+            period_form = form
+
+    # --- XỬ LÝ KHI HIỂN THỊ TRANG (GET REQUEST HOẶC SAU KHI REDIRECT) ---
+
+    # 1. Xác định kỳ lương cần hiển thị
+    if period_form.is_valid():
+        period = period_form.cleaned_data['period']
+    elif period is None:
+        # Lấy kỳ lương gần nhất làm mặc định
+        try:
+            latest_period = PayrollPeriod.objects.latest('end_date')  # Sử dụng latest lookup
+            period = latest_period
+            period_form = PeriodSelectionForm(initial={'period': period})  # Đặt giá trị khởi tạo [29]
+        except PayrollPeriod.DoesNotExist:
+            period = None
+
+    # 2. Truy xuất kết quả bảng lương để hiển thị
+    if period:
+        # Truy xuất tất cả bảng lương đã tính trong kỳ này
+        payroll_entries = PayrollEntry.objects.filter(period=period).order_by('employee__name')
+
+    # 3. Chuẩn bị Context
+    context = {
+        'period_form': period_form,
+        'payroll_entries': payroll_entries,
+        'period': period,
+    }
+
+    # Trả về template duy nhất (theo tên file đơn giản đã thống nhất) [14, 30]
+    return render(request, 'payroll_management.html', context)
Index: giuaki/urls.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>\"\"\"\r\nURL configuration for giuaki project.\r\n\r\nThe `urlpatterns` list routes URLs to views. For more information please see:\r\n    https://docs.djangoproject.com/en/4.2/topics/http/urls/\r\nExamples:\r\nFunction views\r\n    1. Add an import:  from my_app import views\r\n    2. Add a URL to urlpatterns:  path('', views.home, name='home')\r\nClass-based views\r\n    1. Add an import:  from other_app.views import Home\r\n    2. Add a URL to urlpatterns:  path('', Home.as_view(), name='home')\r\nIncluding another URLconf\r\n    1. Import the include() function: from django.urls import include, path\r\n    2. Add a URL to urlpatterns:  path('blog/', include('blog.urls'))\r\n\"\"\"\r\nfrom django.contrib import admin\r\nfrom django.urls import path, include\r\nfrom django.conf import settings # Import settings\r\nfrom django.conf.urls.static import static # Import static\r\nfrom django.contrib.auth import views as auth_views\r\nfrom . import views\r\n\r\nurlpatterns = [\r\n    path('admin/', admin.site.urls),\r\n    path('', include('Quanlytuyendung.urls')),\r\n    path('', include('Khenthuong.urls')),\r\n    path('', views.login, name = 'login'),\r\n    path('hr', views.welcome_view, name='welcome_view'),\r\n    path('manager', views.welcome_view_manager, name='welcome_view_manager'),\r\n    path('employee', views.welcome_view_employee, name='welcome_view_employee'),\r\n    path('login/', auth_views.LoginView.as_view(template_name='login.html'), name='login'),\r\n]\r\n\r\nif settings.DEBUG:\r\n    urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/giuaki/urls.py b/giuaki/urls.py
--- a/giuaki/urls.py	(revision 0c3b7066d7ac776386bbd4c4783c7a5f62c2b720)
+++ b/giuaki/urls.py	(date 1762185339782)
@@ -25,6 +25,7 @@
     path('admin/', admin.site.urls),
     path('', include('Quanlytuyendung.urls')),
     path('', include('Khenthuong.urls')),
+    path('', include('Tinhluong.urls')),
     path('', views.login, name = 'login'),
     path('hr', views.welcome_view, name='welcome_view'),
     path('manager', views.welcome_view_manager, name='welcome_view_manager'),
Index: Quanlyhoso/models.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>from django.db import models\r\nfrom django.contrib.auth.models import User\r\nclass PhongBan(models.Model):\r\n    ten_phong_ban = models.CharField(max_length=200, unique=True, verbose_name=\"Tên phòng ban\")\r\n    mo_ta = models.TextField(blank=True, null=True, verbose_name=\"Mô tả\")\r\n\r\n    class Meta:\r\n        verbose_name = \"Phòng Ban\"\r\n        verbose_name_plural = \"Các Phòng Ban\"\r\n\r\n    def __str__(self):\r\n        return self.ten_phong_ban\r\nclass ChucVu(models.Model):\r\n    ten_chuc_vu = models.CharField(max_length=200, unique=True, verbose_name=\"Tên chức vụ\")\r\n    mo_ta = models.TextField(blank=True, null=True, verbose_name=\"Mô tả\")\r\n\r\n    class Meta:\r\n        verbose_name = \"Chức Vụ\"\r\n        verbose_name_plural = \"Các Chức Vụ\"\r\n\r\n    def __str__(self):\r\n        return self.ten_chuc_vu\r\nclass NhanVien(models.Model):\r\n    GIOI_TINH_CHOICES = (\r\n        ('Nam', 'Nam'),\r\n        ('Nữ', 'Nữ'),\r\n        ('Khác', 'Khác'),\r\n    )\r\n\r\n    TRANG_THAI_CHOICES = (\r\n        ('Đang làm việc', 'Đang làm việc'),\r\n        ('Đã nghỉ việc', 'Đã nghỉ việc'),\r\n        ('Thử việc', 'Thử việc'),\r\n    )\r\n    user = models.OneToOneField(User, on_delete=models.CASCADE, verbose_name=\"Tài khoản\")\r\n    ma_nhan_vien = models.CharField(max_length=20, unique=True, verbose_name=\"Mã nhân viên\")\r\n    phong_ban = models.ForeignKey(PhongBan, on_delete=models.SET_NULL, null=True, blank=True, verbose_name=\"Phòng ban\")\r\n    chuc_vu = models.ForeignKey(ChucVu, on_delete=models.SET_NULL, null=True, blank=True, verbose_name=\"Chức vụ\")\r\n    nguoi_quan_ly = models.ForeignKey('self', on_delete=models.SET_NULL, null=True, blank=True, verbose_name=\"Người quản lý trực tiếp\")\r\n    ngay_bat_dau_lam = models.DateField(verbose_name=\"Ngày bắt đầu làm việc\")\r\n    trang_thai = models.CharField(max_length=50, choices=TRANG_THAI_CHOICES, default='Thử việc',\r\n                                  verbose_name=\"Trạng thái\")\r\n    # Chúng ta dùng DecimalField để có thể quản lý 0.5 ngày (nửa ngày)\r\n    so_ngay_phep_nam_con_lai = models.DecimalField(\r\n        max_digits=4,\r\n        decimal_places=1,\r\n        default=12.0,\r\n        verbose_name=\"Số ngày phép năm còn lại\"\r\n    )\r\n    anh_dai_dien = models.ImageField(upload_to='anh_dai_dien/', null=True, blank=True, verbose_name=\"Ảnh đại diện\")\r\n    ngay_sinh = models.DateField(null=True, blank=True, verbose_name=\"Ngày sinh\")\r\n    gioi_tinh = models.CharField(max_length=10, choices=GIOI_TINH_CHOICES, verbose_name=\"Giới tính\")\r\n    so_dien_thoai = models.CharField(max_length=15, blank=True, verbose_name=\"Số điện thoại\")\r\n    dia_chi = models.TextField(blank=True, verbose_name=\"Địa chỉ\")\r\n    so_cmnd_cccd = models.CharField(max_length=20, blank=True, verbose_name=\"Số CMND/CCCD\")\r\n    ngay_cap = models.DateField(null=True, blank=True, verbose_name=\"Ngày cấp\")\r\n    noi_cap = models.CharField(max_length=200, blank=True, verbose_name=\"Nơi cấp\")\r\n    ma_so_thue = models.CharField(max_length=20, blank=True, verbose_name=\"Mã số thuế\")\r\n    so_so_bhxh = models.CharField(max_length=20, blank=True, verbose_name=\"Số sổ BHXH\")\r\n\r\n    class Meta:\r\n        verbose_name = \"Nhân Viên\"\r\n        verbose_name_plural = \"Các Nhân Viên\"\r\n\r\n    def __str__(self):\r\n        return f\"{self.ma_nhan_vien} - {self.user.get_full_name() or self.user.username}\"\r\nclass HopDong(models.Model):\r\n    LOAI_HOP_DONG_CHOICES = (\r\n        ('Thử việc', 'Thử việc'),\r\n        ('Xác định thời hạn 1 năm', 'Xác định thời hạn 1 năm'),\r\n        ('Xác định thời hạn 3 năm', 'Xác định thời hạn 3 năm'),\r\n        ('Không xác định thời hạn', 'Không xác định thời hạn'),\r\n        ('Thời vụ', 'Thời vụ'),\r\n    )\r\n\r\n    nhan_vien = models.ForeignKey(NhanVien, on_delete=models.CASCADE, related_name='hop_dong', verbose_name=\"Nhân viên\")\r\n    so_hop_dong = models.CharField(max_length=100, unique=True, verbose_name=\"Số hợp đồng\")\r\n    loai_hop_dong = models.CharField(max_length=100, choices=LOAI_HOP_DONG_CHOICES, verbose_name=\"Loại hợp đồng\")\r\n\r\n    ngay_ky = models.DateField(verbose_name=\"Ngày ký\")\r\n    ngay_bat_dau = models.DateField(verbose_name=\"Ngày hiệu lực\")\r\n    ngay_ket_thuc = models.DateField(null=True, blank=True, verbose_name=\"Ngày hết hạn (nếu có)\")\r\n\r\n    luong_co_ban = models.DecimalField(max_digits=12, decimal_places=0, verbose_name=\"Lương cơ bản\")\r\n\r\n    file_scan = models.FileField(upload_to='hop_dong/', null=True, blank=True, verbose_name=\"File scan hợp đồng\")\r\n\r\n    class Meta:\r\n        verbose_name = \"Hợp Đồng\"\r\n        verbose_name_plural = \"Các Hợp Đồng\"\r\n        ordering = ['-ngay_bat_dau']  # Sắp xếp hợp đồng mới nhất lên đầu\r\n\r\n    def __str__(self):\r\n        return f\"{self.so_hop_dong} - {self.nhan_vien.user.username}\"\r\nclass DonNghiPhep(models.Model):\r\n    LOAI_PHEP_CHOICES = (\r\n        ('Phép năm', 'Phép năm'),\r\n        ('Nghỉ ốm', 'Nghỉ ốm'),\r\n        ('Nghỉ không lương', 'Nghỉ không lương'),\r\n        ('Khác', 'Khác'),\r\n    )\r\n\r\n    TRANG_THAI_DON_CHOICES = (\r\n        ('Chờ duyệt', 'Chờ duyệt'),\r\n        ('Đã duyệt', 'Đã duyệt'),\r\n        ('Bị từ chối', 'Bị từ chối'),\r\n    )\r\n\r\n    nhan_vien = models.ForeignKey(NhanVien, on_delete=models.CASCADE, related_name='don_nghi_phep',\r\n                                  verbose_name=\"Nhân viên\")\r\n    loai_nghi_phep = models.CharField(max_length=50, choices=LOAI_PHEP_CHOICES, verbose_name=\"Loại nghỉ phép\")\r\n\r\n    ngay_bat_dau = models.DateField(verbose_name=\"Ngày bắt đầu nghỉ\")\r\n    ngay_ket_thuc = models.DateField(verbose_name=\"Ngày kết thúc nghỉ\")\r\n    so_ngay_nghi = models.DecimalField(max_digits=4, decimal_places=1, verbose_name=\"Tổng số ngày nghỉ\")\r\n\r\n    ly_do = models.TextField(verbose_name=\"Lý do\")\r\n    trang_thai = models.CharField(max_length=50, choices=TRANG_THAI_DON_CHOICES, default='Chờ duyệt',\r\n                                  verbose_name=\"Trạng thái\")\r\n\r\n    ngay_gui_don = models.DateTimeField(auto_now_add=True, verbose_name=\"Ngày gửi đơn\")\r\n    nguoi_xu_ly = models.ForeignKey(User, on_delete=models.SET_NULL, null=True, blank=True,\r\n                                    related_name='nguoi_duyet_don', verbose_name=\"Người xử lý (Quản lý)\")\r\n    ghi_chu_quan_ly = models.TextField(blank=True, verbose_name=\"Ghi chú của quản lý\")\r\n\r\n    class Meta:\r\n        verbose_name = \"Đơn Nghỉ Phép\"\r\n        verbose_name_plural = \"Các Đơn Nghỉ Phép\"\r\n        ordering = ['-ngay_gui_don']\r\n\r\n    def __str__(self):\r\n        return f\"Đơn của {self.nhan_vien.user.username} - {self.ngay_bat_dau}\"\r\nclass ChamCong(models.Model):\r\n    TRANG_THAI_CHAM_CONG_CHOICES = (\r\n        ('Đúng giờ', 'Đúng giờ'),\r\n        ('Đi trễ', 'Đi trễ'),\r\n        ('Về sớm', 'Về sớm'),\r\n        ('Vắng mặt', 'Vắng mặt'),\r\n        ('Nghỉ phép', 'Nghỉ phép'),\r\n    )\r\n\r\n    nhan_vien = models.ForeignKey(NhanVien, on_delete=models.CASCADE, related_name='cham_cong',\r\n                                  verbose_name=\"Nhân viên\")\r\n    ngay_cham_cong = models.DateField(verbose_name=\"Ngày chấm công\")\r\n\r\n    gio_vao = models.TimeField(null=True, blank=True, verbose_name=\"Giờ vào\")\r\n    gio_ra = models.TimeField(null=True, blank=True, verbose_name=\"Giờ ra\")\r\n\r\n    trang_thai = models.CharField(max_length=50, choices=TRANG_THAI_CHAM_CONG_CHOICES, default='Đúng giờ',\r\n                                  verbose_name=\"Trạng thái\")\r\n    ghi_chu = models.TextField(blank=True, verbose_name=\"Ghi chú\")\r\n\r\n    class Meta:\r\n        verbose_name = \"Chấm Công\"\r\n        verbose_name_plural = \"Dữ Liệu Chấm Công\"\r\n        # Đảm bảo mỗi nhân viên chỉ có 1 bản ghi chấm công mỗi ngày\r\n        unique_together = ('nhan_vien', 'ngay_cham_cong')\r\n        ordering = ['-ngay_cham_cong', 'nhan_vien']\r\n\r\n    def __str__(self):\r\n        return f\"{self.nhan_vien.user.username} - {self.ngay_cham_cong}\"\r\n\r\n\r\n# Create your models here.\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Quanlyhoso/models.py b/Quanlyhoso/models.py
--- a/Quanlyhoso/models.py	(revision 0c3b7066d7ac776386bbd4c4783c7a5f62c2b720)
+++ b/Quanlyhoso/models.py	(date 1762185339708)
@@ -10,6 +10,7 @@
 
     def __str__(self):
         return self.ten_phong_ban
+
 class ChucVu(models.Model):
     ten_chuc_vu = models.CharField(max_length=200, unique=True, verbose_name="Tên chức vụ")
     mo_ta = models.TextField(blank=True, null=True, verbose_name="Mô tả")
@@ -26,44 +27,23 @@
         ('Nữ', 'Nữ'),
         ('Khác', 'Khác'),
     )
-
-    TRANG_THAI_CHOICES = (
-        ('Đang làm việc', 'Đang làm việc'),
-        ('Đã nghỉ việc', 'Đã nghỉ việc'),
-        ('Thử việc', 'Thử việc'),
-    )
-    user = models.OneToOneField(User, on_delete=models.CASCADE, verbose_name="Tài khoản")
-    ma_nhan_vien = models.CharField(max_length=20, unique=True, verbose_name="Mã nhân viên")
+    name = models.CharField(max_length=100, null=True, blank=True, verbose_name='Tên nhân viên')
     phong_ban = models.ForeignKey(PhongBan, on_delete=models.SET_NULL, null=True, blank=True, verbose_name="Phòng ban")
     chuc_vu = models.ForeignKey(ChucVu, on_delete=models.SET_NULL, null=True, blank=True, verbose_name="Chức vụ")
-    nguoi_quan_ly = models.ForeignKey('self', on_delete=models.SET_NULL, null=True, blank=True, verbose_name="Người quản lý trực tiếp")
     ngay_bat_dau_lam = models.DateField(verbose_name="Ngày bắt đầu làm việc")
-    trang_thai = models.CharField(max_length=50, choices=TRANG_THAI_CHOICES, default='Thử việc',
-                                  verbose_name="Trạng thái")
-    # Chúng ta dùng DecimalField để có thể quản lý 0.5 ngày (nửa ngày)
-    so_ngay_phep_nam_con_lai = models.DecimalField(
-        max_digits=4,
-        decimal_places=1,
-        default=12.0,
-        verbose_name="Số ngày phép năm còn lại"
-    )
     anh_dai_dien = models.ImageField(upload_to='anh_dai_dien/', null=True, blank=True, verbose_name="Ảnh đại diện")
     ngay_sinh = models.DateField(null=True, blank=True, verbose_name="Ngày sinh")
     gioi_tinh = models.CharField(max_length=10, choices=GIOI_TINH_CHOICES, verbose_name="Giới tính")
     so_dien_thoai = models.CharField(max_length=15, blank=True, verbose_name="Số điện thoại")
     dia_chi = models.TextField(blank=True, verbose_name="Địa chỉ")
     so_cmnd_cccd = models.CharField(max_length=20, blank=True, verbose_name="Số CMND/CCCD")
-    ngay_cap = models.DateField(null=True, blank=True, verbose_name="Ngày cấp")
-    noi_cap = models.CharField(max_length=200, blank=True, verbose_name="Nơi cấp")
-    ma_so_thue = models.CharField(max_length=20, blank=True, verbose_name="Mã số thuế")
-    so_so_bhxh = models.CharField(max_length=20, blank=True, verbose_name="Số sổ BHXH")
 
     class Meta:
         verbose_name = "Nhân Viên"
         verbose_name_plural = "Các Nhân Viên"
 
     def __str__(self):
-        return f"{self.ma_nhan_vien} - {self.user.get_full_name() or self.user.username}"
+        return self.name
 class HopDong(models.Model):
     LOAI_HOP_DONG_CHOICES = (
         ('Thử việc', 'Thử việc'),
@@ -130,35 +110,7 @@
 
     def __str__(self):
         return f"Đơn của {self.nhan_vien.user.username} - {self.ngay_bat_dau}"
-class ChamCong(models.Model):
-    TRANG_THAI_CHAM_CONG_CHOICES = (
-        ('Đúng giờ', 'Đúng giờ'),
-        ('Đi trễ', 'Đi trễ'),
-        ('Về sớm', 'Về sớm'),
-        ('Vắng mặt', 'Vắng mặt'),
-        ('Nghỉ phép', 'Nghỉ phép'),
-    )
-
-    nhan_vien = models.ForeignKey(NhanVien, on_delete=models.CASCADE, related_name='cham_cong',
-                                  verbose_name="Nhân viên")
-    ngay_cham_cong = models.DateField(verbose_name="Ngày chấm công")
-
-    gio_vao = models.TimeField(null=True, blank=True, verbose_name="Giờ vào")
-    gio_ra = models.TimeField(null=True, blank=True, verbose_name="Giờ ra")
-
-    trang_thai = models.CharField(max_length=50, choices=TRANG_THAI_CHAM_CONG_CHOICES, default='Đúng giờ',
-                                  verbose_name="Trạng thái")
-    ghi_chu = models.TextField(blank=True, verbose_name="Ghi chú")
 
-    class Meta:
-        verbose_name = "Chấm Công"
-        verbose_name_plural = "Dữ Liệu Chấm Công"
-        # Đảm bảo mỗi nhân viên chỉ có 1 bản ghi chấm công mỗi ngày
-        unique_together = ('nhan_vien', 'ngay_cham_cong')
-        ordering = ['-ngay_cham_cong', 'nhan_vien']
 
-    def __str__(self):
-        return f"{self.nhan_vien.user.username} - {self.ngay_cham_cong}"
 
-
-# Create your models here.
+# Create your models here.
\ No newline at end of file
Index: Quanlyhoso/migrations/0002_delete_chamcong.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Quanlyhoso/migrations/0002_delete_chamcong.py b/Quanlyhoso/migrations/0002_delete_chamcong.py
new file mode 100644
--- /dev/null	(date 1762185339702)
+++ b/Quanlyhoso/migrations/0002_delete_chamcong.py	(date 1762185339702)
@@ -0,0 +1,16 @@
+# Generated by Django 4.2.8 on 2025-10-27 13:49
+
+from django.db import migrations
+
+
+class Migration(migrations.Migration):
+
+    dependencies = [
+        ('Quanlyhoso', '0001_initial'),
+    ]
+
+    operations = [
+        migrations.DeleteModel(
+            name='ChamCong',
+        ),
+    ]
Index: templates/base.html
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><!doctype html>\r\n{% load static %}\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"utf-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, shrink-to-fit=no\">\r\n\r\n    <!-- Tiêu đề trang (cho phép các trang con ghi đè) -->\r\n    <title>{% block title %}Hệ thống Quản lý Nhân sự{% endblock %}</title>\r\n\r\n    <!-- Link Bootstrap CSS (Cần thiết cho Navbar và Dropdown) -->\r\n    <!-- (Thay thế bằng CDN hoặc đường dẫn static nếu bạn đã tải về) -->\r\n    <link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css\" integrity=\"sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh\" crossorigin=\"anonymous\">\r\n\r\n    <!-- Link Font Awesome (cho icon chuông) -->\r\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css\">\r\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css\">\r\n\r\n    <!-- Custom CSS -->\r\n    <link rel=\"stylesheet\" href=\"{% static 'main.css' %}\">\r\n\r\n    {% block extrastyle %}{% endblock %}\r\n</head>\r\n<body class=\"bg-white\">\r\n\r\n<!-- HEADER (LOGO, NAVIGATION, AVATAR) -->\r\n<header>\r\n    <!-- Sử dụng lớp navbar-custom để áp dụng màu xanh dương nhạt -->\r\n    <nav class=\"navbar navbar-expand-lg navbar-light bg-light navbar-custom\" style=\"min-height:100px; align-items:center;\">\r\n\r\n        <!-- Logo bên trái ngoài cùng -->\r\n        <a class=\"navbar-brand d-flex align-items-center\" href=\"{% url 'welcome_view' %}\" style=\"gap:10px;\">\r\n            {% block brand_logo %}\r\n                <img src=\"{% static 'logo.png' %}\" alt=\"Logo Công ty\" class=\"logo-img\" style=\"height:65px;width:auto;display:block;\">\r\n                <span class=\"text-primary font-weight-bold\">HR System</span>\r\n            {% endblock brand_logo %}\r\n        </a>\r\n\r\n        <button class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarNavDropdown\" aria-controls=\"navbarNavDropdown\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n            <span class=\"navbar-toggler-icon\"></span>\r\n        </button>\r\n\r\n        <div class=\"collapse navbar-collapse\" id=\"navbarNavDropdown\">\r\n            <ul class=\"navbar-nav mx-auto\" style=\"display:flex;justify-content:space-around;width:50%;\">\r\n\r\n                <!-- Navigation Item: Quản lý Hồ sơ Nhân viên (Drill Down) -->\r\n                <li class=\"nav-item dropdown\">\r\n                    <a class=\"nav-link dropdown-toggle text-dark\" href=\"#\" id=\"hosoDropdown\" role=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                        <strong>Quản lý Hồ sơ Nhân viên</strong>\r\n                    </a>\r\n                    <div class=\"dropdown-menu\" aria-labelledby=\"hosoDropdown\">\r\n                        <a class=\"dropdown-item\" href=\"#\">Hồ sơ Cá nhân</a>\r\n                        <a class=\"dropdown-item\" href=\"#\">Danh sách Nhân viên</a>\r\n                        <div class=\"dropdown-divider\"></div>\r\n                        <a class=\"dropdown-item\" href=\"#\">Báo cáo Hồ sơ</a>\r\n                    </div>\r\n                </li>\r\n\r\n                <!-- Các Navigation Item khác -->\r\n                <li class=\"nav-item dropdown\">\r\n                    <a class=\"nav-link dropdown-toggle text-dark\" href=\"#\" id=\"KPIDropdown\" role=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                        <strong>KPI - Khen thưởng</strong>\r\n                    </a>\r\n                    <div class=\"dropdown-menu\" aria-labelledby=\"KPIDropdown\">\r\n                        <a class=\"dropdown-item\" href=\"#\">Hiệu suất làm việc</a>\r\n                        <a class=\"dropdown-item\" href=\"#\">Khen thưởng</a>\r\n                    </div>\r\n                </li>\r\n                <li class=\"nav-item dropdown\">\r\n                    <a class=\"nav-link dropdown-toggle text-dark\" href=\"{% url 'recruitment_home' %}\" id=\"tdDropdown\" role=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                        <strong>Tuyển dụng</strong>\r\n                    </a>\r\n                    <div class=\"dropdown-menu\" aria-labelledby=\"tdDropdown\">\r\n                        <a class=\"dropdown-item\" href=\"{% url 'all_job_postings' %}\">Bài đăng tuyển dụng</a>\r\n                        <a class=\"dropdown-item\" href=\"{% url 'candidate_apply' %}\">Form Tuyển dụng</a>\r\n                        <a class=\"dropdown-item\" href=\"{% url 'quanly_tuyendung' %}\">Quản lý tuyển dụng</a>\r\n                    </div>\r\n                </li>\r\n                <li class=\"nav-item dropdown\">\r\n                    <a class=\"nav-link dropdown-toggle text-dark\" href=\"#\" id=\"tlDropdown\" role=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                        <strong>Tính lương</strong>\r\n                    </a>\r\n                    <div class=\"dropdown-menu\" aria-labelledby=\"tlDropdown\">\r\n                        <a class=\"dropdown-item\" href=\"#\">Bảng chấm công</a>\r\n                        <a class=\"dropdown-item\" href=\"#\">Hệ số lương</a>\r\n                    </div>\r\n                </li>\r\n\r\n            </ul>\r\n\r\n            <!-- Phần Tài khoản và Thông báo (Bên phải ngoài cùng) -->\r\n            <ul class=\"navbar-nav ml-auto\">\r\n                {% if user.is_authenticated %}\r\n                    <!-- Biểu tượng thông báo -->\r\n                    <li class=\"nav-item d-flex align-items-center\">\r\n                        <a class=\"nav-link d-flex align-items-center position-relative\" href=\"#\" title=\"Thông báo\" style=\"padding-top: 0; padding-bottom: 0;\">\r\n                            <i class=\"fa fa-bell text-primary\" style=\"font-size: 22px;\"></i>\r\n                            <span class=\"badge badge-danger position-absolute\" style=\"top: 0; right: 0; font-size: 10px;\">3</span>\r\n                        </a>\r\n                    </li>\r\n\r\n                    <!-- Avatar và Trang Hồ sơ -->\r\n                    <li class=\"nav-item dropdown\">\r\n                        <a class=\"nav-link dropdown-toggle d-flex align-items-center\" href=\"#\" id=\"navbarDropdownUser\" role=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\" style=\"gap:10px;\">\r\n                            <img src=\"{% static 'avatar1.jpg' %}\" alt=\"Avatar\" class=\"avatar-img\" style=\"height:55px;width:55px;display:block;\">\r\n                            <span class=\"text-primary font-weight-bold\">{{ request.user.username|default:\"Tài khoản\" }}</span>\r\n                        </a>\r\n                        <div class=\"dropdown-menu dropdown-menu-right\" aria-labelledby=\"navbarDropdownUser\">\r\n                            <a class=\"dropdown-item\" href=\"#\">Hồ sơ cá nhân</a> <!-- Cần định nghĩa URL 'profile' sau -->\r\n                            <div class=\"dropdown-divider\"></div>\r\n                            <a class=\"dropdown-item\" href=\"#\">Đăng xuất</a> <!-- Cần định nghĩa URL logout sau -->\r\n                        </div>\r\n                    </li>\r\n                {% endif %}\r\n            </ul>\r\n        </div>\r\n    </nav>\r\n</header>\r\n\r\n<!-- KHỐI NỘI DUNG CHÍNH -->\r\n<main>\r\n    <!-- Thẻ div.container-fluid để tạo bố cục và khoảng trống [9] -->\r\n    <div class=\"container-fluid mt-3\">\r\n\r\n        <!-- Xuất thông điệp (messages) của Django [9, 10] -->\r\n        {% for message in messages %}\r\n        <div class=\"alert alert-{% if message.level_tag == 'error' %}danger{% else %}{{ message.level_tag }}{% endif %}\" role=\"alert\">\r\n            {{ message }}\r\n        </div>\r\n        {% endfor %}\r\n\r\n        {% block content %}\r\n            <div class=\"jumbotron bg-light\">\r\n                <h1 class=\"display-4 text-primary\">Chào mừng đến với Hệ thống Quản lý Nhân sự</h1>\r\n                <p class=\"lead\">Giao diện mẫu sử dụng base.html cấp dự án.</p>\r\n            </div>\r\n        {% endblock content %}\r\n    </div>\r\n</main>\r\n\r\n<!-- FOOTER -->\r\n<!--\r\n<footer class=\"footer-custom mt-5 py-3 border-top\">\r\n    <div class=\"container\">\r\n        <div class=\"row justify-content-between\">\r\n            <p class=\"text-center mb-1\">\r\n                <a href=\"/about\" class=\"text-secondary mx-2\">Về chúng tôi</a> |\r\n                <a href=\"/policy\" class=\"text-secondary mx-2\">Trang Chính sách</a>\r\n            </p>\r\n            <p class=\"text-center text-muted mb-0\">\r\n                &copy; 2024 [Tên Công ty của bạn]. Copyright.\r\n            </p>\r\n        </div>\r\n    </div>\r\n</footer>\r\n-->\r\n<footer class=\"footer-custom mt-5 py-3 border-top\">\r\n  <div class=\"container-fluid px-5\">\r\n    <div class=\"row justify-content-between\">\r\n      <!-- Cột 1 -->\r\n      <div class=\"col-md-4\">\r\n          <h5><strong>HR System</strong></h5>\r\n        <p>Empowering your workplace with smart management</p>\r\n          <!--\r\n        <div class=\"d-flex gap-3\">\r\n          <a href=\"#\"><i class=\"fab fa-facebook\"></i></a>\r\n          <a href=\"#\"><i class=\"fab fa-instagram\"></i></a>\r\n          <a href=\"#\"><i class=\"fab fa-twitter\"></i></a>\r\n        </div>\r\n        -->\r\n        <p class=\"mt-2 mb-0\"><i class=\"fas fa-map-marker-alt\"></i> 71 Ngũ Hành Sơn, Đà Nẵng</p>\r\n        <p class=\"mb-0\"><i class=\"fas fa-envelope\"></i> hrsystem@gmail.com</p>\r\n        <p><i class=\"fas fa-phone\"></i> 032 5657 642</p>\r\n      </div>\r\n\r\n      <!-- Cột 2 -->\r\n      <div class=\"col-md-3\">\r\n          <h5><strong>Về chúng tôi</strong></h5>\r\n        <ul class=\"list-unstyled\">\r\n          <li><a href=\"#\">Trang chủ</a></li>\r\n          <li><a href=\"#\">Giới thiệu</a></li>\r\n          <li><a href=\"#\">Liên hệ</a></li>\r\n        </ul>\r\n      </div>\r\n\r\n      <!-- Cột 3 -->\r\n      <div class=\"col-md-3\">\r\n          <h5><strong>Chính sách</strong></h5>\r\n        <ul class=\"list-unstyled\">\r\n          <li><a href=\"#\">Chính sách an toàn</a></li>\r\n          <li><a href=\"#\">Chính sách bảo mật</a></li>\r\n          <li><a href=\"#\">Hướng dẫn sử dụng</a></li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</footer>\r\n\r\n\r\n<!-- Thêm Bootstrap JS (Cần cho Dropdown và Collapse của Navbar) -->\r\n<!-- Lưu ý: Cần import jQuery và Popper.js trước Bootstrap JS -->\r\n<script src=\"https://code.jquery.com/jquery-3.4.1.slim.min.js\" integrity=\"sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n\" crossorigin=\"anonymous\"></script>\r\n<script src=\"https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js\" integrity=\"sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo\" crossorigin=\"anonymous\"></script>\r\n<script src=\"https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js\" integrity=\"sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6\" crossorigin=\"anonymous\"></script>\r\n\r\n</body>\r\n</html>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/templates/base.html b/templates/base.html
--- a/templates/base.html	(revision 0c3b7066d7ac776386bbd4c4783c7a5f62c2b720)
+++ b/templates/base.html	(date 1762185339782)
@@ -59,7 +59,7 @@
                 <!-- Các Navigation Item khác -->
                 <li class="nav-item dropdown">
                     <a class="nav-link dropdown-toggle text-dark" href="#" id="KPIDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
-                        <strong>KPI - Khen thưởng</strong>
+                        <strong> Hiệu suất - Khen thưởng</strong>
                     </a>
                     <div class="dropdown-menu" aria-labelledby="KPIDropdown">
                         <a class="dropdown-item" href="#">Hiệu suất làm việc</a>
Index: Tinhluong/migrations/0003_employeesalary_is_active_payrollperiod_is_closed.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Tinhluong/migrations/0003_employeesalary_is_active_payrollperiod_is_closed.py b/Tinhluong/migrations/0003_employeesalary_is_active_payrollperiod_is_closed.py
new file mode 100644
--- /dev/null	(date 1762185339757)
+++ b/Tinhluong/migrations/0003_employeesalary_is_active_payrollperiod_is_closed.py	(date 1762185339757)
@@ -0,0 +1,23 @@
+# Generated by Django 4.2.8 on 2025-10-27 15:32
+
+from django.db import migrations, models
+
+
+class Migration(migrations.Migration):
+
+    dependencies = [
+        ('Tinhluong', '0002_chamcong_employeesalary_payrollentry_payrollperiod_and_more'),
+    ]
+
+    operations = [
+        migrations.AddField(
+            model_name='employeesalary',
+            name='is_active',
+            field=models.BooleanField(default=True, verbose_name='Đang áp dụng'),
+        ),
+        migrations.AddField(
+            model_name='payrollperiod',
+            name='is_closed',
+            field=models.BooleanField(default=False, verbose_name='Đã chốt kỳ'),
+        ),
+    ]
Index: Quanlyhoso/migrations/0001_initial.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+># Generated by Django 4.2.8 on 2025-10-27 10:22\r\n\r\nfrom django.conf import settings\r\nfrom django.db import migrations, models\r\nimport django.db.models.deletion\r\n\r\n\r\nclass Migration(migrations.Migration):\r\n\r\n    initial = True\r\n\r\n    dependencies = [\r\n        migrations.swappable_dependency(settings.AUTH_USER_MODEL),\r\n    ]\r\n\r\n    operations = [\r\n        migrations.CreateModel(\r\n            name='ChucVu',\r\n            fields=[\r\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\r\n                ('ten_chuc_vu', models.CharField(max_length=200, unique=True, verbose_name='Tên chức vụ')),\r\n                ('mo_ta', models.TextField(blank=True, null=True, verbose_name='Mô tả')),\r\n            ],\r\n            options={\r\n                'verbose_name': 'Chức Vụ',\r\n                'verbose_name_plural': 'Các Chức Vụ',\r\n            },\r\n        ),\r\n        migrations.CreateModel(\r\n            name='PhongBan',\r\n            fields=[\r\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\r\n                ('ten_phong_ban', models.CharField(max_length=200, unique=True, verbose_name='Tên phòng ban')),\r\n                ('mo_ta', models.TextField(blank=True, null=True, verbose_name='Mô tả')),\r\n            ],\r\n            options={\r\n                'verbose_name': 'Phòng Ban',\r\n                'verbose_name_plural': 'Các Phòng Ban',\r\n            },\r\n        ),\r\n        migrations.CreateModel(\r\n            name='NhanVien',\r\n            fields=[\r\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\r\n                ('ma_nhan_vien', models.CharField(max_length=20, unique=True, verbose_name='Mã nhân viên')),\r\n                ('ngay_bat_dau_lam', models.DateField(verbose_name='Ngày bắt đầu làm việc')),\r\n                ('trang_thai', models.CharField(choices=[('Đang làm việc', 'Đang làm việc'), ('Đã nghỉ việc', 'Đã nghỉ việc'), ('Thử việc', 'Thử việc')], default='Thử việc', max_length=50, verbose_name='Trạng thái')),\r\n                ('so_ngay_phep_nam_con_lai', models.DecimalField(decimal_places=1, default=12.0, max_digits=4, verbose_name='Số ngày phép năm còn lại')),\r\n                ('anh_dai_dien', models.ImageField(blank=True, null=True, upload_to='anh_dai_dien/', verbose_name='Ảnh đại diện')),\r\n                ('ngay_sinh', models.DateField(blank=True, null=True, verbose_name='Ngày sinh')),\r\n                ('gioi_tinh', models.CharField(choices=[('Nam', 'Nam'), ('Nữ', 'Nữ'), ('Khác', 'Khác')], max_length=10, verbose_name='Giới tính')),\r\n                ('so_dien_thoai', models.CharField(blank=True, max_length=15, verbose_name='Số điện thoại')),\r\n                ('dia_chi', models.TextField(blank=True, verbose_name='Địa chỉ')),\r\n                ('so_cmnd_cccd', models.CharField(blank=True, max_length=20, verbose_name='Số CMND/CCCD')),\r\n                ('ngay_cap', models.DateField(blank=True, null=True, verbose_name='Ngày cấp')),\r\n                ('noi_cap', models.CharField(blank=True, max_length=200, verbose_name='Nơi cấp')),\r\n                ('ma_so_thue', models.CharField(blank=True, max_length=20, verbose_name='Mã số thuế')),\r\n                ('so_so_bhxh', models.CharField(blank=True, max_length=20, verbose_name='Số sổ BHXH')),\r\n                ('chuc_vu', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='Quanlyhoso.chucvu', verbose_name='Chức vụ')),\r\n                ('nguoi_quan_ly', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='Quanlyhoso.nhanvien', verbose_name='Người quản lý trực tiếp')),\r\n                ('phong_ban', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='Quanlyhoso.phongban', verbose_name='Phòng ban')),\r\n                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL, verbose_name='Tài khoản')),\r\n            ],\r\n            options={\r\n                'verbose_name': 'Nhân Viên',\r\n                'verbose_name_plural': 'Các Nhân Viên',\r\n            },\r\n        ),\r\n        migrations.CreateModel(\r\n            name='HopDong',\r\n            fields=[\r\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\r\n                ('so_hop_dong', models.CharField(max_length=100, unique=True, verbose_name='Số hợp đồng')),\r\n                ('loai_hop_dong', models.CharField(choices=[('Thử việc', 'Thử việc'), ('Xác định thời hạn 1 năm', 'Xác định thời hạn 1 năm'), ('Xác định thời hạn 3 năm', 'Xác định thời hạn 3 năm'), ('Không xác định thời hạn', 'Không xác định thời hạn'), ('Thời vụ', 'Thời vụ')], max_length=100, verbose_name='Loại hợp đồng')),\r\n                ('ngay_ky', models.DateField(verbose_name='Ngày ký')),\r\n                ('ngay_bat_dau', models.DateField(verbose_name='Ngày hiệu lực')),\r\n                ('ngay_ket_thuc', models.DateField(blank=True, null=True, verbose_name='Ngày hết hạn (nếu có)')),\r\n                ('luong_co_ban', models.DecimalField(decimal_places=0, max_digits=12, verbose_name='Lương cơ bản')),\r\n                ('file_scan', models.FileField(blank=True, null=True, upload_to='hop_dong/', verbose_name='File scan hợp đồng')),\r\n                ('nhan_vien', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='hop_dong', to='Quanlyhoso.nhanvien', verbose_name='Nhân viên')),\r\n            ],\r\n            options={\r\n                'verbose_name': 'Hợp Đồng',\r\n                'verbose_name_plural': 'Các Hợp Đồng',\r\n                'ordering': ['-ngay_bat_dau'],\r\n            },\r\n        ),\r\n        migrations.CreateModel(\r\n            name='DonNghiPhep',\r\n            fields=[\r\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\r\n                ('loai_nghi_phep', models.CharField(choices=[('Phép năm', 'Phép năm'), ('Nghỉ ốm', 'Nghỉ ốm'), ('Nghỉ không lương', 'Nghỉ không lương'), ('Khác', 'Khác')], max_length=50, verbose_name='Loại nghỉ phép')),\r\n                ('ngay_bat_dau', models.DateField(verbose_name='Ngày bắt đầu nghỉ')),\r\n                ('ngay_ket_thuc', models.DateField(verbose_name='Ngày kết thúc nghỉ')),\r\n                ('so_ngay_nghi', models.DecimalField(decimal_places=1, max_digits=4, verbose_name='Tổng số ngày nghỉ')),\r\n                ('ly_do', models.TextField(verbose_name='Lý do')),\r\n                ('trang_thai', models.CharField(choices=[('Chờ duyệt', 'Chờ duyệt'), ('Đã duyệt', 'Đã duyệt'), ('Bị từ chối', 'Bị từ chối')], default='Chờ duyệt', max_length=50, verbose_name='Trạng thái')),\r\n                ('ngay_gui_don', models.DateTimeField(auto_now_add=True, verbose_name='Ngày gửi đơn')),\r\n                ('ghi_chu_quan_ly', models.TextField(blank=True, verbose_name='Ghi chú của quản lý')),\r\n                ('nguoi_xu_ly', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='nguoi_duyet_don', to=settings.AUTH_USER_MODEL, verbose_name='Người xử lý (Quản lý)')),\r\n                ('nhan_vien', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='don_nghi_phep', to='Quanlyhoso.nhanvien', verbose_name='Nhân viên')),\r\n            ],\r\n            options={\r\n                'verbose_name': 'Đơn Nghỉ Phép',\r\n                'verbose_name_plural': 'Các Đơn Nghỉ Phép',\r\n                'ordering': ['-ngay_gui_don'],\r\n            },\r\n        ),\r\n        migrations.CreateModel(\r\n            name='ChamCong',\r\n            fields=[\r\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\r\n                ('ngay_cham_cong', models.DateField(verbose_name='Ngày chấm công')),\r\n                ('gio_vao', models.TimeField(blank=True, null=True, verbose_name='Giờ vào')),\r\n                ('gio_ra', models.TimeField(blank=True, null=True, verbose_name='Giờ ra')),\r\n                ('trang_thai', models.CharField(choices=[('Đúng giờ', 'Đúng giờ'), ('Đi trễ', 'Đi trễ'), ('Về sớm', 'Về sớm'), ('Vắng mặt', 'Vắng mặt'), ('Nghỉ phép', 'Nghỉ phép')], default='Đúng giờ', max_length=50, verbose_name='Trạng thái')),\r\n                ('ghi_chu', models.TextField(blank=True, verbose_name='Ghi chú')),\r\n                ('nhan_vien', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='cham_cong', to='Quanlyhoso.nhanvien', verbose_name='Nhân viên')),\r\n            ],\r\n            options={\r\n                'verbose_name': 'Chấm Công',\r\n                'verbose_name_plural': 'Dữ Liệu Chấm Công',\r\n                'ordering': ['-ngay_cham_cong', 'nhan_vien'],\r\n                'unique_together': {('nhan_vien', 'ngay_cham_cong')},\r\n            },\r\n        ),\r\n    ]\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Quanlyhoso/migrations/0001_initial.py b/Quanlyhoso/migrations/0001_initial.py
--- a/Quanlyhoso/migrations/0001_initial.py	(revision 0c3b7066d7ac776386bbd4c4783c7a5f62c2b720)
+++ b/Quanlyhoso/migrations/0001_initial.py	(date 1762185339702)
@@ -1,4 +1,4 @@
-# Generated by Django 4.2.8 on 2025-10-27 10:22
+# Generated by Django 4.2.8 on 2025-10-27 11:32
 
 from django.conf import settings
 from django.db import migrations, models
@@ -42,10 +42,12 @@
             name='NhanVien',
             fields=[
                 ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
+                ('fullname', models.CharField(blank=True, max_length=255, null=True, verbose_name='Họ và Tên')),
                 ('ma_nhan_vien', models.CharField(max_length=20, unique=True, verbose_name='Mã nhân viên')),
                 ('ngay_bat_dau_lam', models.DateField(verbose_name='Ngày bắt đầu làm việc')),
                 ('trang_thai', models.CharField(choices=[('Đang làm việc', 'Đang làm việc'), ('Đã nghỉ việc', 'Đã nghỉ việc'), ('Thử việc', 'Thử việc')], default='Thử việc', max_length=50, verbose_name='Trạng thái')),
                 ('so_ngay_phep_nam_con_lai', models.DecimalField(decimal_places=1, default=12.0, max_digits=4, verbose_name='Số ngày phép năm còn lại')),
+                ('email', models.EmailField(default='temp@example.com', max_length=255, verbose_name='Địa chỉ Email')),
                 ('anh_dai_dien', models.ImageField(blank=True, null=True, upload_to='anh_dai_dien/', verbose_name='Ảnh đại diện')),
                 ('ngay_sinh', models.DateField(blank=True, null=True, verbose_name='Ngày sinh')),
                 ('gioi_tinh', models.CharField(choices=[('Nam', 'Nam'), ('Nữ', 'Nữ'), ('Khác', 'Khác')], max_length=10, verbose_name='Giới tính')),
Index: Tinhluong/migrations/0002_chamcong_employeesalary_payrollentry_payrollperiod_and_more.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Tinhluong/migrations/0002_chamcong_employeesalary_payrollentry_payrollperiod_and_more.py b/Tinhluong/migrations/0002_chamcong_employeesalary_payrollentry_payrollperiod_and_more.py
new file mode 100644
--- /dev/null	(date 1762185339755)
+++ b/Tinhluong/migrations/0002_chamcong_employeesalary_payrollentry_payrollperiod_and_more.py	(date 1762185339755)
@@ -0,0 +1,171 @@
+# Generated by Django 4.2.8 on 2025-10-27 13:49
+
+from django.db import migrations, models
+import django.db.models.deletion
+
+
+class Migration(migrations.Migration):
+
+    dependencies = [
+        ('Quanlyhoso', '0002_delete_chamcong'),
+        ('Tinhluong', '0001_initial'),
+    ]
+
+    operations = [
+        migrations.CreateModel(
+            name='ChamCong',
+            fields=[
+                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
+                ('ngay_cham_cong', models.DateField(verbose_name='Ngày chấm công')),
+                ('gio_vao', models.TimeField(blank=True, null=True, verbose_name='Giờ vào')),
+                ('gio_ra', models.TimeField(blank=True, null=True, verbose_name='Giờ ra')),
+                ('trang_thai', models.CharField(choices=[('Đúng giờ', 'Đúng giờ'), ('Đi trễ', 'Đi trễ'), ('Về sớm', 'Về sớm'), ('Vắng mặt', 'Vắng mặt'), ('Nghỉ phép', 'Nghỉ phép')], default='Đúng giờ', max_length=50, verbose_name='Trạng thái')),
+                ('nhan_vien', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='cham_cong', to='Quanlyhoso.nhanvien', verbose_name='Nhân viên')),
+            ],
+            options={
+                'verbose_name': 'Chấm Công',
+                'verbose_name_plural': 'Dữ Liệu Chấm Công',
+                'ordering': ['-ngay_cham_cong', 'nhan_vien'],
+                'unique_together': {('nhan_vien', 'ngay_cham_cong')},
+            },
+        ),
+        migrations.CreateModel(
+            name='EmployeeSalary',
+            fields=[
+                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
+                ('amount', models.DecimalField(decimal_places=2, max_digits=15, verbose_name='Số tiền')),
+            ],
+            options={
+                'verbose_name': 'Lương Cố định Nhân viên',
+            },
+        ),
+        migrations.CreateModel(
+            name='PayrollEntry',
+            fields=[
+                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
+                ('luong_co_ban', models.DecimalField(decimal_places=2, max_digits=15, verbose_name='Lương cơ bản (Rate)')),
+                ('so_ngay_cong_thuc_te', models.DecimalField(decimal_places=2, max_digits=5, verbose_name='Ngày công thực tế')),
+                ('so_ngay_cong_chuan', models.DecimalField(decimal_places=2, max_digits=5, verbose_name='Ngày công chuẩn')),
+                ('tong_phu_cap', models.DecimalField(decimal_places=2, max_digits=15, verbose_name='Tổng Phụ cấp')),
+                ('tong_thuong', models.DecimalField(decimal_places=2, max_digits=15, verbose_name='Tổng Thưởng')),
+                ('thuc_linh', models.DecimalField(decimal_places=2, max_digits=15, verbose_name='Thực lĩnh')),
+                ('calculated_date', models.DateTimeField(auto_now_add=True, verbose_name='Ngày tính')),
+                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='Quanlyhoso.nhanvien', verbose_name='Nhân viên')),
+            ],
+            options={
+                'verbose_name': 'Bảng Lương Đã Tính',
+            },
+        ),
+        migrations.CreateModel(
+            name='PayrollPeriod',
+            fields=[
+                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
+                ('name', models.CharField(max_length=100, verbose_name='Tên kỳ lương')),
+                ('start_date', models.DateField(verbose_name='Ngày bắt đầu')),
+                ('end_date', models.DateField(verbose_name='Ngày kết thúc')),
+                ('standard_working_days', models.DecimalField(decimal_places=2, max_digits=5, verbose_name='Số ngày công chuẩn')),
+            ],
+            options={
+                'verbose_name': 'Kỳ Lương',
+                'ordering': ['-start_date'],
+            },
+        ),
+        migrations.CreateModel(
+            name='VariableBonus',
+            fields=[
+                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
+                ('amount', models.DecimalField(decimal_places=2, max_digits=15, verbose_name='Số tiền thưởng')),
+            ],
+            options={
+                'verbose_name': 'Thưởng Biến đổi',
+            },
+        ),
+        migrations.RemoveField(
+            model_name='payrollrecord',
+            name='employee',
+        ),
+        migrations.RemoveField(
+            model_name='payrollrecord',
+            name='processed_by',
+        ),
+        migrations.AlterUniqueTogether(
+            name='timesheet',
+            unique_together=None,
+        ),
+        migrations.RemoveField(
+            model_name='timesheet',
+            name='employee',
+        ),
+        migrations.AlterModelOptions(
+            name='salarycomponent',
+            options={'verbose_name': 'Thành phần Lương'},
+        ),
+        migrations.RemoveField(
+            model_name='salarycomponent',
+            name='amount',
+        ),
+        migrations.RemoveField(
+            model_name='salarycomponent',
+            name='is_deduction',
+        ),
+        migrations.AddField(
+            model_name='salarycomponent',
+            name='component_type',
+            field=models.CharField(choices=[('BASE', 'Lương Cơ Bản'), ('ALLOWANCE', 'Phụ Cấp'), ('BONUS', 'Thưởng')], default='BASE', max_length=10, verbose_name='Loại thành phần'),
+        ),
+        migrations.AlterField(
+            model_name='salarycomponent',
+            name='name',
+            field=models.CharField(max_length=100, unique=True, verbose_name='Tên thành phần'),
+        ),
+        migrations.DeleteModel(
+            name='CustomAdjustment',
+        ),
+        migrations.DeleteModel(
+            name='Employee',
+        ),
+        migrations.DeleteModel(
+            name='PayrollRecord',
+        ),
+        migrations.DeleteModel(
+            name='Timesheet',
+        ),
+        migrations.AddField(
+            model_name='variablebonus',
+            name='component',
+            field=models.ForeignKey(limit_choices_to={'component_type': 'BONUS'}, on_delete=django.db.models.deletion.PROTECT, to='Tinhluong.salarycomponent', verbose_name='Loại thưởng'),
+        ),
+        migrations.AddField(
+            model_name='variablebonus',
+            name='employee',
+            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='Quanlyhoso.nhanvien', verbose_name='Nhân viên'),
+        ),
+        migrations.AddField(
+            model_name='variablebonus',
+            name='period',
+            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='Tinhluong.payrollperiod', verbose_name='Kỳ lương'),
+        ),
+        migrations.AddField(
+            model_name='payrollentry',
+            name='period',
+            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='Tinhluong.payrollperiod', verbose_name='Kỳ lương'),
+        ),
+        migrations.AddField(
+            model_name='employeesalary',
+            name='component',
+            field=models.ForeignKey(limit_choices_to={'component_type__in': ['BASE', 'ALLOWANCE']}, on_delete=django.db.models.deletion.PROTECT, to='Tinhluong.salarycomponent', verbose_name='Thành phần lương'),
+        ),
+        migrations.AddField(
+            model_name='employeesalary',
+            name='employee',
+            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='salary_details', to='Quanlyhoso.nhanvien', verbose_name='Nhân viên'),
+        ),
+        migrations.AlterUniqueTogether(
+            name='payrollentry',
+            unique_together={('employee', 'period')},
+        ),
+        migrations.AlterUniqueTogether(
+            name='employeesalary',
+            unique_together={('employee', 'component')},
+        ),
+    ]
Index: Tinhluong/admin.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>from django.contrib import admin\r\nfrom Tinhluong.models import (Employee, SalaryComponent, Timesheet, CustomAdjustment, PayrollRecord)\r\n\r\n\r\nadmin.site.register(Employee)\r\nadmin.site.register(SalaryComponent)\r\nadmin.site.register(Timesheet)\r\nadmin.site.register(CustomAdjustment)\r\nadmin.site.register(PayrollRecord)\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Tinhluong/admin.py b/Tinhluong/admin.py
--- a/Tinhluong/admin.py	(revision 0c3b7066d7ac776386bbd4c4783c7a5f62c2b720)
+++ b/Tinhluong/admin.py	(date 1762185339751)
@@ -1,10 +1,11 @@
 from django.contrib import admin
-from Tinhluong.models import (Employee, SalaryComponent, Timesheet, CustomAdjustment, PayrollRecord)
+from .models import (SalaryComponent, EmployeeSalary, PayrollPeriod, ChamCong, VariableBonus, PayrollEntry)
 
 
-admin.site.register(Employee)
 admin.site.register(SalaryComponent)
-admin.site.register(Timesheet)
-admin.site.register(CustomAdjustment)
-admin.site.register(PayrollRecord)
+admin.site.register(EmployeeSalary)
+admin.site.register(PayrollPeriod)
+admin.site.register(ChamCong)
+admin.site.register(VariableBonus)
+admin.site.register(PayrollEntry)
 
Index: Tinhluong/urls.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Tinhluong/urls.py b/Tinhluong/urls.py
new file mode 100644
--- /dev/null	(date 1762185339767)
+++ b/Tinhluong/urls.py	(date 1762185339767)
@@ -0,0 +1,6 @@
+from django.urls import path
+from . import views
+
+urlpatterns = [
+    path('tinhluong/', views.payroll_management_view, name='payroll_management_view'),
+]
\ No newline at end of file
Index: Tinhluong/templates/payroll_management.html
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Tinhluong/templates/payroll_management.html b/Tinhluong/templates/payroll_management.html
new file mode 100644
--- /dev/null	(date 1762185339767)
+++ b/Tinhluong/templates/payroll_management.html	(date 1762185339767)
@@ -0,0 +1,102 @@
+{% extends 'base.html' %}
+
+{% comment %} Kế thừa từ template base.html [35-37] {% endcomment %}
+
+{% block title %}
+    Quản lý Tính Lương Nhân sự
+{% endblock %}
+
+{% block content %}
+    {% comment %}
+    Đặt khối nội dung trong container-fluid để tạo bố cục và khoảng trống (tương tự Bài tập Chương 4) [31]
+    {% endcomment %}
+    <div class="container-fluid">
+
+        <!-- Hiển thị thông báo (Django Messages) -->
+        {% comment %} Áp dụng định dạng Bootstrap cho thông báo [31, 32, 38] {% endcomment %}
+        {% for message in messages %}
+            <div class="alert alert-{% if message.level_tag == 'error' %} danger{% else %}{{ message.level_tag }}{% endif %}" role="alert">
+                {{ message }}
+            </div>
+        {% endfor %}
+
+        <h1 class="mt-4">Chức năng Tính Lương</h1>
+        <hr>
+
+        <!-- Phần I: Form lựa chọn Kỳ lương và Kích hoạt Tính toán -->
+        <div class="card mb-4">
+            <div class="card-header">
+                <h2>1. Kích hoạt Tính Lương</h2>
+            </div>
+            <div class="card-body">
+                {% if period_form %}
+                    <form method="post" class="mb-4">
+                        {% csrf_token %}
+                        {% comment %} Bắt buộc phải có CSRF token cho POST request [39, 40] {% endcomment %}
+
+                        {{ period_form.as_p }}
+                        {% comment %} Hiển thị form dưới dạng đoạn văn bản [41, 42] {% endcomment %}
+
+                        <button type="submit" class="btn btn-primary">
+                            <i class="fas fa-calculator"></i> Thực hiện Tính Lương
+                        </button>
+                    </form>
+                {% else %}
+                    <p class="text-danger">Không thể tải Form lựa chọn kỳ lương.</p>
+                {% endif %}
+            </div>
+        </div>
+
+        <!-- Phần II: Hiển thị Kết quả Bảng Lương Đã Tính -->
+        <div class="card">
+            <div class="card-header">
+                {% if period %}
+                    <h2>2. Bảng Lương Đã Tính (Kỳ: {{ period.name }})</h2>
+                {% else %}
+                    <h2>2. Bảng Lương Đã Tính</h2>
+                {% endif %}
+            </div>
+            <div class="card-body">
+                {% if payroll_entries %}
+                    <p>Danh sách <strong>{{ payroll_entries|length }}</strong> bảng lương đã được tính cho kỳ này:</p>
+
+                    <ul class="list-group">
+                        {% for entry in payroll_entries %}
+                            {% comment %} Sử dụng cấu trúc list group của Bootstrap, tương tự như book_list [36, 43] {% endcomment %}
+                            <li class="list-group-item">
+                                <span class="text-info">Nhân viên:</span>
+                                <strong>{{ entry.employee.name }}</strong>
+                                <br>
+                                <span class="text-info">Ngày công thực tế:</span>
+                                <span>{{ entry.so_ngay_cong_thuc_te }} / {{ entry.so_ngay_cong_chuan }} ngày</span>
+                                <br>
+                                <span class="text-info">Lương cơ bản điều chỉnh:</span>
+                                <span>{{ entry.luong_co_ban }} VND</span>
+                                <br>
+                                <span class="text-info">Tổng Phụ cấp:</span>
+                                <span>{{ entry.tong_phu_cap }} VND</span>
+                                <br>
+                                <span class="text-info">Tổng Thưởng:</span>
+                                <span>{{ entry.tong_thuong }} VND</span>
+                                <br>
+                                <span class="text-danger">THỰC LĨNH:</span>
+                                <strong>{{ entry.thuc_linh }} VND</strong>
+
+                                <a href="#" class="btn btn-sm btn-outline-info float-right">
+                                    Xem chi tiết
+                                </a>
+
+                            </li>
+                        {% empty %}
+                            {% comment %} Sử dụng tag empty nếu không có kết quả [43, 44] {% endcomment %}
+                            <p class="text-secondary">Chưa có bảng lương nào được tính cho kỳ này.</p>
+                        {% endfor %}
+                    </ul>
+                {% else %}
+                    <p>Không có dữ liệu bảng lương để hiển thị. Vui lòng chọn kỳ và thực hiện tính toán.</p>
+                {% endif %}
+            </div>
+        </div>
+
+    </div>
+{% endblock content %}
\ No newline at end of file
Index: Quanlyhoso/migrations/0003_remove_nhanvien_email_remove_nhanvien_fullname_and_more.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Quanlyhoso/migrations/0003_remove_nhanvien_email_remove_nhanvien_fullname_and_more.py b/Quanlyhoso/migrations/0003_remove_nhanvien_email_remove_nhanvien_fullname_and_more.py
new file mode 100644
--- /dev/null	(date 1762185339704)
+++ b/Quanlyhoso/migrations/0003_remove_nhanvien_email_remove_nhanvien_fullname_and_more.py	(date 1762185339704)
@@ -0,0 +1,62 @@
+# Generated by Django 4.2.8 on 2025-10-28 03:42
+
+from django.db import migrations, models
+
+
+class Migration(migrations.Migration):
+
+    dependencies = [
+        ('Quanlyhoso', '0002_delete_chamcong'),
+    ]
+
+    operations = [
+        migrations.RemoveField(
+            model_name='nhanvien',
+            name='email',
+        ),
+        migrations.RemoveField(
+            model_name='nhanvien',
+            name='fullname',
+        ),
+        migrations.RemoveField(
+            model_name='nhanvien',
+            name='ma_nhan_vien',
+        ),
+        migrations.RemoveField(
+            model_name='nhanvien',
+            name='ma_so_thue',
+        ),
+        migrations.RemoveField(
+            model_name='nhanvien',
+            name='ngay_cap',
+        ),
+        migrations.RemoveField(
+            model_name='nhanvien',
+            name='nguoi_quan_ly',
+        ),
+        migrations.RemoveField(
+            model_name='nhanvien',
+            name='noi_cap',
+        ),
+        migrations.RemoveField(
+            model_name='nhanvien',
+            name='so_ngay_phep_nam_con_lai',
+        ),
+        migrations.RemoveField(
+            model_name='nhanvien',
+            name='so_so_bhxh',
+        ),
+        migrations.RemoveField(
+            model_name='nhanvien',
+            name='trang_thai',
+        ),
+        migrations.RemoveField(
+            model_name='nhanvien',
+            name='user',
+        ),
+        migrations.AddField(
+            model_name='nhanvien',
+            name='name',
+            field=models.CharField(blank=True, max_length=100, null=True, verbose_name='Tên nhân viên'),
+        ),
+    ]
Index: Khenthuong/migrations/0002_remove_project_employee_project_employee.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+># Generated by Django 4.2.8 on 2025-10-27 12:36\r\n\r\nfrom django.db import migrations, models\r\n\r\n\r\nclass Migration(migrations.Migration):\r\n\r\n    dependencies = [\r\n        ('Quanlyhoso', '0001_initial'),\r\n        ('Khenthuong', '0001_initial'),\r\n    ]\r\n\r\n    operations = [\r\n        migrations.RemoveField(\r\n            model_name='project',\r\n            name='employee',\r\n        ),\r\n        migrations.AddField(\r\n            model_name='project',\r\n            name='employee',\r\n            field=models.ManyToManyField(related_name='employee_projects', through='Khenthuong.ProjectEmployee', to='Quanlyhoso.nhanvien'),\r\n        ),\r\n    ]\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Khenthuong/migrations/0002_remove_project_employee_project_employee.py b/Khenthuong/migrations/0002_remove_project_employee_project_employee.py
--- a/Khenthuong/migrations/0002_remove_project_employee_project_employee.py	(revision 0c3b7066d7ac776386bbd4c4783c7a5f62c2b720)
+++ b/Khenthuong/migrations/0002_remove_project_employee_project_employee.py	(date 1762185339682)
@@ -1,4 +1,4 @@
-# Generated by Django 4.2.8 on 2025-10-27 12:36
+# Generated by Django 4.2.8 on 2025-10-27 14:58
 
 from django.db import migrations, models
 
Index: Tinhluong/migrations/0001_initial.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+># Generated by Django 4.2.8 on 2025-10-24 05:20\r\n\r\nfrom django.conf import settings\r\nfrom django.db import migrations, models\r\nimport django.db.models.deletion\r\n\r\n\r\nclass Migration(migrations.Migration):\r\n\r\n    initial = True\r\n\r\n    dependencies = [\r\n        migrations.swappable_dependency(settings.AUTH_USER_MODEL),\r\n    ]\r\n\r\n    operations = [\r\n        migrations.CreateModel(\r\n            name='Employee',\r\n            fields=[\r\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\r\n                ('employee_code', models.CharField(help_text='Mã định danh duy nhất của nhân viên.', max_length=10, unique=True)),\r\n                ('first_names', models.CharField(help_text='Tên của nhân viên.', max_length=50)),\r\n                ('last_names', models.CharField(help_text='Họ của nhân viên.', max_length=50)),\r\n                ('salary_level', models.IntegerField(blank=True, help_text='Bậc lương để xác định mức lương cơ bản.', null=True)),\r\n            ],\r\n        ),\r\n        migrations.CreateModel(\r\n            name='SalaryComponent',\r\n            fields=[\r\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\r\n                ('name', models.CharField(help_text='Tên thành phần lương (ví dụ: Lương Cơ Bản, Phụ Cấp Ăn Trưa).', max_length=50)),\r\n                ('amount', models.DecimalField(decimal_places=2, help_text='Số tiền cố định của thành phần này.', max_digits=10)),\r\n                ('is_deduction', models.BooleanField(default=False, help_text='Đánh dấu nếu đây là khoản khấu trừ (ví dụ: Bảo hiểm xã hội).')),\r\n            ],\r\n        ),\r\n        migrations.CreateModel(\r\n            name='PayrollRecord',\r\n            fields=[\r\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\r\n                ('period_start_date', models.DateField(help_text='Ngày bắt đầu kỳ tính lương.')),\r\n                ('period_end_date', models.DateField(help_text='Ngày kết thúc kỳ tính lương.')),\r\n                ('gross_salary', models.DecimalField(decimal_places=2, help_text='Tổng lương trước thuế.', max_digits=12)),\r\n                ('deductions', models.DecimalField(decimal_places=2, help_text='Tổng các khoản khấu trừ (thuế, bảo hiểm...).', max_digits=12)),\r\n                ('net_salary', models.DecimalField(decimal_places=2, help_text='Lương thực nhận (Net Salary).', max_digits=12)),\r\n                ('is_paid', models.BooleanField(default=False, help_text='Trạng thái đã thanh toán.')),\r\n                ('employee', models.ForeignKey(help_text='Nhân viên nhận bảng lương.', on_delete=django.db.models.deletion.PROTECT, to='Tinhluong.employee')),\r\n                ('processed_by', models.ForeignKey(blank=True, help_text='Người dùng (admin) đã xử lý bảng lương.', null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),\r\n            ],\r\n        ),\r\n        migrations.CreateModel(\r\n            name='CustomAdjustment',\r\n            fields=[\r\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\r\n                ('adjustment_type', models.CharField(choices=[('BONUS', 'Thưởng'), ('DEDUCTION', 'Khấu Trừ/Phạt'), ('ALLOWANCE', 'Phụ Cấp Khác')], help_text='Loại điều chỉnh (Thưởng, Phạt, Phụ cấp).', max_length=20)),\r\n                ('amount', models.DecimalField(decimal_places=2, help_text='Số tiền điều chỉnh.', max_digits=10)),\r\n                ('notes', models.TextField(blank=True, help_text='Ghi chú chi tiết về khoản điều chỉnh.')),\r\n                ('employee', models.ForeignKey(help_text='Nhân viên áp dụng khoản điều chỉnh.', on_delete=django.db.models.deletion.CASCADE, to='Tinhluong.employee')),\r\n                ('payroll_record', models.ForeignKey(blank=True, help_text='Bảng lương mà điều chỉnh này được áp dụng.', null=True, on_delete=django.db.models.deletion.SET_NULL, to='Tinhluong.payrollrecord')),\r\n            ],\r\n        ),\r\n        migrations.CreateModel(\r\n            name='Timesheet',\r\n            fields=[\r\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\r\n                ('month_year', models.DateField(help_text='Ngày đầu tiên của tháng tính lương.', verbose_name='Tháng tính lương')),\r\n                ('working_days', models.FloatField(help_text='Số ngày công thực tế.')),\r\n                ('overtime_hours', models.IntegerField(default=0, help_text='Số giờ tăng ca (nếu có).')),\r\n                ('status', models.CharField(choices=[('PENDING', 'Chờ Duyệt'), ('APPROVED', 'Đã Duyệt'), ('REJECTED', 'Từ Chối')], default='PENDING', help_text='Trạng thái của bảng chấm công.', max_length=10)),\r\n                ('employee', models.ForeignKey(help_text='Nhân viên có bảng chấm công này.', on_delete=django.db.models.deletion.PROTECT, to='Tinhluong.employee')),\r\n            ],\r\n            options={\r\n                'unique_together': {('employee', 'month_year')},\r\n            },\r\n        ),\r\n    ]\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Tinhluong/migrations/0001_initial.py b/Tinhluong/migrations/0001_initial.py
--- a/Tinhluong/migrations/0001_initial.py	(revision 0c3b7066d7ac776386bbd4c4783c7a5f62c2b720)
+++ b/Tinhluong/migrations/0001_initial.py	(date 1762185339755)
@@ -1,4 +1,4 @@
-# Generated by Django 4.2.8 on 2025-10-24 05:20
+# Generated by Django 4.2.8 on 2025-10-27 11:32
 
 from django.conf import settings
 from django.db import migrations, models
Index: .idea/DuAnNhom-CODE.iml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<module type=\"PYTHON_MODULE\" version=\"4\">\r\n  <component name=\"NewModuleRootManager\">\r\n    <content url=\"file://$MODULE_DIR$\" />\r\n    <orderEntry type=\"jdk\" jdkName=\"Python 3.12 virtualenv at C:\\Users\\VIETTEL\\PycharmProjects\\PythonProject\\.venv (2)\" jdkType=\"Python SDK\" />\r\n    <orderEntry type=\"sourceFolder\" forTests=\"false\" />\r\n  </component>\r\n  <component name=\"PyDocumentationSettings\">\r\n    <option name=\"format\" value=\"PLAIN\" />\r\n    <option name=\"myDocStringFormat\" value=\"Plain\" />\r\n  </component>\r\n</module>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/DuAnNhom-CODE.iml b/.idea/DuAnNhom-CODE.iml
--- a/.idea/DuAnNhom-CODE.iml	(revision 0c3b7066d7ac776386bbd4c4783c7a5f62c2b720)
+++ b/.idea/DuAnNhom-CODE.iml	(date 1762185339662)
@@ -2,7 +2,7 @@
 <module type="PYTHON_MODULE" version="4">
   <component name="NewModuleRootManager">
     <content url="file://$MODULE_DIR$" />
-    <orderEntry type="jdk" jdkName="Python 3.12 virtualenv at C:\Users\VIETTEL\PycharmProjects\PythonProject\.venv (2)" jdkType="Python SDK" />
+    <orderEntry type="jdk" jdkName="Python 3.12 virtualenv at C:\Users\VIETTEL\PycharmProjects\PythonProject\.venv" jdkType="Python SDK" />
     <orderEntry type="sourceFolder" forTests="false" />
   </component>
   <component name="PyDocumentationSettings">
Index: Khenthuong/admin.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>from django.contrib import admin\r\n\r\n# Register your models here.\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Khenthuong/admin.py b/Khenthuong/admin.py
--- a/Khenthuong/admin.py	(revision 0c3b7066d7ac776386bbd4c4783c7a5f62c2b720)
+++ b/Khenthuong/admin.py	(date 1762185339680)
@@ -1,3 +1,40 @@
 from django.contrib import admin
+from .models import Project, RewardList, RewardSuggest, ProjectEmployee, PerformanceCriteria, PerformanceReview, ScoreDetail, Reward, RewardAnnounce
+
+
+class ProjectAdmin(admin.ModelAdmin):
+    list_display = ('name', 'led_project','description','started_date', 'ended_date')
+
+class RewardListAdmin(admin.ModelAdmin):
+    list_display = ('reward_item','reward_announce','rewarded_value','rewarded_date')
+
+class ProjectEmployeeAdmin(admin.ModelAdmin):
+    list_display = ('role', 'added_date')
+
+class PerformanceCriteriaAdmin(admin.ModelAdmin):
+    list_display = ('code', 'name', 'type', 'weight', 'description')
+
+class PerformanceReviewAdmin(admin.ModelAdmin):
+    list_display = ('review_date', 'period', 'final_score')
 
-# Register your models here.
+class ScoreDetailAdmin(admin.ModelAdmin):
+    list_display = ('score', 'comment')
+
+class RewardAdmin(admin.ModelAdmin):
+    list_display = ('code', 'name', 'type')
+
+class RewardAnnounceAdmin(admin.ModelAdmin):
+    list_display = ('name', 'budget', 'maximum_employee', 'announced_date', 'description')
+
+class RewardSuggestAdmin(admin.ModelAdmin):
+    list_display = ('description', 'status')
+
+admin.site.register(RewardList, RewardListAdmin)
+admin.site.register(ProjectEmployee, ProjectEmployeeAdmin)
+admin.site.register(PerformanceCriteria, PerformanceCriteriaAdmin)
+admin.site.register(PerformanceReview, PerformanceReviewAdmin)
+admin.site.register(ScoreDetail, ScoreDetailAdmin)
+admin.site.register(Reward, RewardAdmin)
+admin.site.register(RewardAnnounce, RewardAnnounceAdmin)
+admin.site.register(RewardSuggest, RewardSuggestAdmin)
+admin.site.register(Project, ProjectAdmin)
Index: .idea/misc.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"Black\">\r\n    <option name=\"sdkName\" value=\"Python 3.12 (Comment8or)\" />\r\n  </component>\r\n  <component name=\"ProjectRootManager\" version=\"2\" project-jdk-name=\"Python 3.12 virtualenv at C:\\Users\\VIETTEL\\PycharmProjects\\PythonProject\\.venv (2)\" project-jdk-type=\"Python SDK\" />\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/misc.xml b/.idea/misc.xml
--- a/.idea/misc.xml	(revision 0c3b7066d7ac776386bbd4c4783c7a5f62c2b720)
+++ b/.idea/misc.xml	(date 1762185339662)
@@ -3,5 +3,5 @@
   <component name="Black">
     <option name="sdkName" value="Python 3.12 (Comment8or)" />
   </component>
-  <component name="ProjectRootManager" version="2" project-jdk-name="Python 3.12 virtualenv at C:\Users\VIETTEL\PycharmProjects\PythonProject\.venv (2)" project-jdk-type="Python SDK" />
+  <component name="ProjectRootManager" version="2" project-jdk-name="Python 3.12 virtualenv at C:\Users\VIETTEL\PycharmProjects\PythonProject\.venv" project-jdk-type="Python SDK" />
 </project>
\ No newline at end of file
Index: .idea/vcs.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"VcsDirectoryMappings\">\r\n    <mapping directory=\"$PROJECT_DIR$\" vcs=\"Git\" />\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/vcs.xml b/.idea/vcs.xml
--- a/.idea/vcs.xml	(revision 0c3b7066d7ac776386bbd4c4783c7a5f62c2b720)
+++ b/.idea/vcs.xml	(date 1762185339671)
@@ -2,5 +2,6 @@
 <project version="4">
   <component name="VcsDirectoryMappings">
     <mapping directory="$PROJECT_DIR$" vcs="Git" />
+    <mapping directory="$PROJECT_DIR$/Quanlytuyendung" vcs="Git" />
   </component>
 </project>
\ No newline at end of file
Index: Khenthuong/migrations/0001_initial.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+># Generated by Django 4.2.8 on 2025-10-27 10:22\r\n\r\nfrom django.db import migrations, models\r\nimport django.db.models.deletion\r\n\r\n\r\nclass Migration(migrations.Migration):\r\n\r\n    initial = True\r\n\r\n    dependencies = [\r\n        ('Quanlyhoso', '0001_initial'),\r\n    ]\r\n\r\n    operations = [\r\n        migrations.CreateModel(\r\n            name='PerformanceCriteria',\r\n            fields=[\r\n                ('code', models.CharField(max_length=10, primary_key=True, serialize=False, verbose_name='Mã Tiêu Chí')),\r\n                ('name', models.CharField(max_length=255, verbose_name='Tên Tiêu Chí')),\r\n                ('type', models.CharField(choices=[('QUANT', 'Định Lượng (KPI)'), ('QUAL', 'Định Tính'), ('GOAL', 'Mục Tiêu')], default='QUANT', max_length=10, verbose_name='Loại Tiêu Chí')),\r\n                ('weight', models.DecimalField(decimal_places=2, default=0.0, max_digits=5, verbose_name='Trọng Số (%)')),\r\n                ('description', models.TextField(help_text='Mô tả cách thức đánh giá và tính điểm.', verbose_name='Mô tả chi tiết')),\r\n            ],\r\n            options={\r\n                'verbose_name': 'Tiêu Chí Đánh Giá',\r\n                'verbose_name_plural': 'Danh Mục Tiêu Chí',\r\n            },\r\n        ),\r\n        migrations.CreateModel(\r\n            name='PerformanceReview',\r\n            fields=[\r\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\r\n                ('review_date', models.DateField(auto_now_add=True, verbose_name='Ngày Đánh Giá')),\r\n                ('period', models.CharField(help_text='Ví dụ: Q3-2024, Năm 2024', max_length=50, verbose_name='Kỳ Đánh Giá')),\r\n                ('final_score', models.DecimalField(decimal_places=2, default=0.0, max_digits=5, verbose_name='Điểm Tổng Kết')),\r\n            ],\r\n            options={\r\n                'verbose_name': 'Phiếu Đánh Giá Hiệu Suất',\r\n                'verbose_name_plural': 'Quản Lý Đánh Giá Hiệu Suất',\r\n            },\r\n        ),\r\n        migrations.CreateModel(\r\n            name='Project',\r\n            fields=[\r\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\r\n                ('name', models.CharField(max_length=500, verbose_name='Tên Dự Án')),\r\n                ('description', models.TextField(help_text='Nhập mô tả dự án', verbose_name='Mô tả')),\r\n                ('started_date', models.DateField(auto_now_add=True, verbose_name='Ngày bắt đầu')),\r\n                ('ended_date', models.DateField(null=True, verbose_name='Ngày kết thúc')),\r\n                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='employee_projects', to='Quanlyhoso.nhanvien')),\r\n                ('led_project', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='led_projects', to='Quanlyhoso.nhanvien')),\r\n            ],\r\n            options={\r\n                'verbose_name': 'Dự án',\r\n                'verbose_name_plural': 'Danh sách dự án',\r\n            },\r\n        ),\r\n        migrations.CreateModel(\r\n            name='Reward',\r\n            fields=[\r\n                ('code', models.CharField(max_length=5, primary_key=True, serialize=False, verbose_name='Mã khen thưởng')),\r\n                ('name', models.CharField(max_length=500, verbose_name='Tên hạng mục Khen thưởng')),\r\n                ('type', models.CharField(choices=[('PERIODIC', 'Định kỳ'), ('PERFORMANCE', 'Hiệu suất')], max_length=15, verbose_name='Nhóm hạng mục')),\r\n            ],\r\n            options={\r\n                'verbose_name': 'Hạng mục khen thưởng',\r\n                'verbose_name_plural': 'Danh mục khen thưởng',\r\n            },\r\n        ),\r\n        migrations.CreateModel(\r\n            name='RewardAnnounce',\r\n            fields=[\r\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\r\n                ('name', models.CharField(max_length=500, verbose_name='Tên Thông báo')),\r\n                ('budget', models.IntegerField(verbose_name='Ngân sách Khen thưởng')),\r\n                ('maximum_employee', models.IntegerField(verbose_name='Số lượng khen thưởng tối đa')),\r\n                ('announced_date', models.DateField(auto_now_add=True, verbose_name='Ngày thông báo khen thưởng')),\r\n                ('description', models.TextField(help_text='Mô tả nội dung thông báo khen thưởng', verbose_name='Nội dung thông báo khen thưởng')),\r\n                ('reward_code', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='Khenthuong.reward', verbose_name='Hạng mục khen thưởng áp dụng')),\r\n            ],\r\n            options={\r\n                'verbose_name': 'Thông báo khen thưởng',\r\n                'verbose_name_plural': 'Lịch sử thông báo khen thưởng',\r\n            },\r\n        ),\r\n        migrations.CreateModel(\r\n            name='ScoreDetail',\r\n            fields=[\r\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\r\n                ('score', models.DecimalField(decimal_places=2, max_digits=5, verbose_name='Điểm Đạt Được')),\r\n                ('comment', models.TextField(blank=True, verbose_name='Nhận Xét')),\r\n                ('criteria', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='Khenthuong.performancecriteria', verbose_name='Tiêu Chí')),\r\n                ('review', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='Khenthuong.performancereview', verbose_name='Phiếu Đánh Giá')),\r\n            ],\r\n            options={\r\n                'verbose_name': 'Chi Tiết Điểm Số',\r\n                'verbose_name_plural': 'Chi Tiết Điểm Số',\r\n                'unique_together': {('review', 'criteria')},\r\n            },\r\n        ),\r\n        migrations.CreateModel(\r\n            name='RewardSuggest',\r\n            fields=[\r\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\r\n                ('description', models.TextField(help_text='Nhập lí do khen thưởng', verbose_name='Lí do khen thưởng')),\r\n                ('status', models.CharField(choices=[('PENDING', 'Chờ duyệt'), ('APPROVED', 'Đã duyệt'), ('REJECTED', 'Từ chối')], default='PENDING', max_length=15, verbose_name='Trạng thái xét duyệt')),\r\n                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='reward_suggestions', to='Quanlyhoso.nhanvien')),\r\n                ('reward_announce', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='Khenthuong.rewardannounce', verbose_name='Thông báo áp dụng')),\r\n                ('reward_item', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='Khenthuong.reward', verbose_name='Hạng mục nhận thưởng')),\r\n                ('suggested_by', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='suggestions_made', to='Quanlyhoso.nhanvien')),\r\n            ],\r\n            options={\r\n                'verbose_name': 'Đề xuất khen thưởng',\r\n                'verbose_name_plural': 'Danh sách đề xuất khen thưởng',\r\n            },\r\n        ),\r\n        migrations.AddField(\r\n            model_name='performancereview',\r\n            name='criteria',\r\n            field=models.ManyToManyField(through='Khenthuong.ScoreDetail', to='Khenthuong.performancecriteria', verbose_name='Các Tiêu Chí Áp Dụng'),\r\n        ),\r\n        migrations.AddField(\r\n            model_name='performancereview',\r\n            name='employee',\r\n            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='reviews_received', to='Quanlyhoso.nhanvien'),\r\n        ),\r\n        migrations.AddField(\r\n            model_name='performancereview',\r\n            name='reviewer',\r\n            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='reviews_given', to='Quanlyhoso.nhanvien'),\r\n        ),\r\n        migrations.CreateModel(\r\n            name='RewardList',\r\n            fields=[\r\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\r\n                ('rewarded_value', models.IntegerField(verbose_name='Giá trị Khen thưởng')),\r\n                ('rewarded_date', models.DateField(auto_now_add=True, verbose_name='Ngày khen thưởng')),\r\n                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='reward_lists', to='Quanlyhoso.nhanvien')),\r\n                ('reward_announce', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='Khenthuong.rewardannounce', verbose_name='Thông báo áp dụng')),\r\n                ('reward_item', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='Khenthuong.reward', verbose_name='Hạng mục nhận thưởng')),\r\n            ],\r\n            options={\r\n                'verbose_name': 'Khen thưởng',\r\n                'verbose_name_plural': 'Danh sách khen thưởng',\r\n                'unique_together': {('employee', 'reward_announce')},\r\n            },\r\n        ),\r\n        migrations.CreateModel(\r\n            name='ProjectEmployee',\r\n            fields=[\r\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\r\n                ('role', models.CharField(default='Thành viên', max_length=100, verbose_name='Vai trò')),\r\n                ('added_date', models.DateField(auto_now_add=True, verbose_name='Ngày tham gia')),\r\n                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='project_assignments', to='Quanlyhoso.nhanvien')),\r\n                ('project', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='Khenthuong.project', verbose_name='Mã Dự Án')),\r\n            ],\r\n            options={\r\n                'ordering': ['-project', 'employee'],\r\n                'unique_together': {('project', 'employee', 'role')},\r\n            },\r\n        ),\r\n        migrations.AlterUniqueTogether(\r\n            name='performancereview',\r\n            unique_together={('employee', 'period')},\r\n        ),\r\n    ]\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Khenthuong/migrations/0001_initial.py b/Khenthuong/migrations/0001_initial.py
--- a/Khenthuong/migrations/0001_initial.py	(revision 0c3b7066d7ac776386bbd4c4783c7a5f62c2b720)
+++ b/Khenthuong/migrations/0001_initial.py	(date 1762185339682)
@@ -1,4 +1,4 @@
-# Generated by Django 4.2.8 on 2025-10-27 10:22
+# Generated by Django 4.2.8 on 2025-10-27 11:32
 
 from django.db import migrations, models
 import django.db.models.deletion
Index: Quanlyhoso/admin.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>from django.contrib import admin\r\n\r\n# Register your models here.\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Quanlyhoso/admin.py b/Quanlyhoso/admin.py
--- a/Quanlyhoso/admin.py	(revision 0c3b7066d7ac776386bbd4c4783c7a5f62c2b720)
+++ b/Quanlyhoso/admin.py	(date 1762185339700)
@@ -1,3 +1,9 @@
 from django.contrib import admin
+from .models import (PhongBan, ChucVu, NhanVien, HopDong, DonNghiPhep)
 
 # Register your models here.
+admin.site.register(PhongBan)
+admin.site.register(ChucVu)
+admin.site.register(NhanVien)
+admin.site.register(HopDong)
+admin.site.register(DonNghiPhep)
